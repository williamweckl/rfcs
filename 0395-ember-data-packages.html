<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>0395-ember-data-packages - </title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="affix"><a href="introduction.html">Introduction</a></li><li><a href="0001-transform-attribute-meta-parameter.html">0001-transform-attribute-meta-parameter</a></li><li><a href="0003-block-params.html">0003-block-params</a></li><li><a href="0003-cli-ember-doctor.html">0003-cli-ember-doctor</a></li><li><a href="0010-engines.html">0010-engines</a></li><li><a href="0011-improved-cp-syntax.html">0011-improved-cp-syntax</a></li><li><a href="0012-help-json-output.html">0012-help-json-output</a></li><li><a href="0015-the-road-to-ember-2-0.html">0015-the-road-to-ember-2-0</a></li><li><a href="0020-sri-default.html">0020-sri-default</a></li><li><a href="0023-command-line-completion.html">0023-command-line-completion</a></li><li><a href="0024-bound-attributes.html">0024-bound-attributes</a></li><li><a href="0028-app-import-output-file.html">0028-app-import-output-file</a></li><li><a href="0029-addon-black-and-whitelist-for-apps.html">0029-addon-black-and-whitelist-for-apps</a></li><li><a href="0045-internet-explorer.html">0045-internet-explorer</a></li><li><a href="0046-cli-improved-release-process.html">0046-cli-improved-release-process</a></li><li><a href="0046-registry-reform.html">0046-registry-reform</a></li><li><a href="0050-cli-production-code-stripping.html">0050-cli-production-code-stripping</a></li><li><a href="0050-improved-actions.html">0050-improved-actions</a></li><li><a href="0053-helpers.html">0053-helpers</a></li><li><a href="0055-anonymous-amd.html">0055-anonymous-amd</a></li><li><a href="0056-improved-release-cycle.html">0056-improved-release-cycle</a></li><li><a href="0057-ember-data-reference-unification.html">0057-ember-data-reference-unification</a></li><li><a href="0058-helper-listing.html">0058-helper-listing</a></li><li><a href="0061-ember-data-background-fetch.html">0061-ember-data-background-fetch</a></li><li><a href="0064-contextual-component-lookup.html">0064-contextual-component-lookup</a></li><li><a href="0065-deprecation-warning-handlers.html">0065-deprecation-warning-handlers</a></li><li><a href="0080-serve-file-api.html">0080-serve-file-api</a></li><li><a href="0086-firefox-in-ci.html">0086-firefox-in-ci</a></li><li><a href="0090-addon-tree-caching.html">0090-addon-tree-caching</a></li><li><a href="0091-cli-addon-instrumentation-experimental-hooks.html">0091-cli-addon-instrumentation-experimental-hooks</a></li><li><a href="0091-weakmap.html">0091-weakmap</a></li><li><a href="0092-blueprint-remove-old-files.html">0092-blueprint-remove-old-files</a></li><li><a href="0095-cli-standardise-targets.html">0095-cli-standardise-targets</a></li><li><a href="0095-router-service.html">0095-router-service</a></li><li><a href="0096-enable-yarn-usage.html">0096-enable-yarn-usage</a></li><li><a href="0101-ember-data-friendly-errors.html">0101-ember-data-friendly-errors</a></li><li><a href="0105-addons-optionalDependencies.html">0105-addons-optionalDependencies</a></li><li><a href="0108-add-custom-transform.html">0108-add-custom-transform</a></li><li><a href="0110-packaging.html">0110-packaging</a></li><li><a href="0114-add-template-lint-addon.html">0114-add-template-lint-addon</a></li><li><a href="0116-qunit-dom.html">0116-qunit-dom</a></li><li><a href="0120-cli-guides.html">0120-cli-guides</a></li><li><a href="0120-route-serializers.html">0120-route-serializers</a></li><li><a href="0121-remove-ember-cli-eslint.html">0121-remove-ember-cli-eslint</a></li><li><a href="0136-contains-to-includes.html">0136-contains-to-includes</a></li><li><a href="0139-isHtmlSafe.html">0139-isHtmlSafe</a></li><li><a href="0143-module-unification.html">0143-module-unification</a></li><li><a href="0150-factory-for.html">0150-factory-for</a></li><li><a href="0176-javascript-module-api.html">0176-javascript-module-api</a></li><li><a href="0178-deprecate-ember-k.html">0178-deprecate-ember-k</a></li><li><a href="0181-deprecate-ember-data-initializers.html">0181-deprecate-ember-data-initializers</a></li><li><a href="0186-track-unique-history-location-state.html">0186-track-unique-history-location-state</a></li><li><a href="0191-deprecate-component-lifecycle-hook-args.html">0191-deprecate-component-lifecycle-hook-args</a></li><li><a href="0194-deprecate-custom-event-manager.html">0194-deprecate-custom-event-manager</a></li><li><a href="0213-custom-components.html">0213-custom-components</a></li><li><a href="0225-ember-engines-mount-params.html">0225-ember-engines-mount-params</a></li><li><a href="0226-named-blocks.html">0226-named-blocks</a></li><li><a href="0229-deprecate-testing-restricted-resolver.html">0229-deprecate-testing-restricted-resolver</a></li><li><a href="0232-simplify-qunit-testing-api.html">0232-simplify-qunit-testing-api</a></li><li><a href="0236-deprecation-ember-string.html">0236-deprecation-ember-string</a></li><li><a href="0237-deprecation-ember-map.html">0237-deprecation-ember-map</a></li><li><a href="0240-es-classes.html">0240-es-classes</a></li><li><a href="0252-browser-support-changes.html">0252-browser-support-changes</a></li><li><a href="0268-acceptance-testing-refactor.html">0268-acceptance-testing-refactor</a></li><li><a href="0272-deprecation-native-function-prototype-extensions.html">0272-deprecation-native-function-prototype-extensions</a></li><li><a href="0276-named-args.html">0276-named-args</a></li><li><a href="0278-template-only-components.html">0278-template-only-components</a></li><li><a href="0280-remove-application-wrapper.html">0280-remove-application-wrapper</a></li><li><a href="0281-es5-getters.html">0281-es5-getters</a></li><li><a href="0286-block-let-template-helper.html">0286-block-let-template-helper</a></li><li><a href="0287-promote-in-element-to-public-api.html">0287-promote-in-element-to-public-api</a></li><li><a href="0293-record-data.html">0293-record-data</a></li><li><a href="0294-optional-jquery.html">0294-optional-jquery</a></li><li><a href="0297-deprecate-ember-logger.html">0297-deprecate-ember-logger</a></li><li><a href="0300-rfc-process-update.html">0300-rfc-process-update</a></li><li><a href="0308-deprecate-property-lookup-fallback.html">0308-deprecate-property-lookup-fallback</a></li><li><a href="0311-angle-bracket-invocation.html">0311-angle-bracket-invocation</a></li><li><a href="0318-array-helper.html">0318-array-helper</a></li><li><a href="0322-deprecate-copy-copyable.html">0322-deprecate-copy-copyable</a></li><li><a href="0324-deprecate-component-isvisible.html">0324-deprecate-component-isvisible</a></li><li><a href="0326-ember-data-filter-deprecation.html">0326-ember-data-filter-deprecation</a></li><li><a href="0329-deprecated-ember-evented-in-ember-data.html">0329-deprecated-ember-evented-in-ember-data</a></li><li><a href="0331-deprecate-globals-resolver.html">0331-deprecate-globals-resolver</a></li><li><a href="0332-ember-data-record-links-and-meta.html">0332-ember-data-record-links-and-meta</a></li><li><a href="0335-deprecate-send-action.html">0335-deprecate-send-action</a></li><li><a href="0337-native-class-constructor-update.html">0337-native-class-constructor-update</a></li><li><a href="0340-deprecate-ember-merge.html">0340-deprecate-ember-merge</a></li><li><a href="0345-discord.html">0345-discord</a></li><li><a href="0364-roadmap-2018.html">0364-roadmap-2018</a></li><li><a href="0369-deprecate-computed-clobberability.html">0369-deprecate-computed-clobberability</a></li><li><a href="0370-deprecate-computed-volatile.html">0370-deprecate-computed-volatile</a></li><li><a href="0372-ember-data-model-factory-for.html">0372-ember-data-model-factory-for</a></li><li><a href="0373-Element-Modifier-Managers.html">0373-Element-Modifier-Managers</a></li><li><a href="0375-deprecate-computed-property-modifier.html">0375-deprecate-computed-property-modifier</a></li><li><a href="0386-remove-jquery.html">0386-remove-jquery</a></li><li><a href="0389-dynamic-tag-names.html">0389-dynamic-tag-names</a></li><li><a href="0391-router-helpers.html">0391-router-helpers</a></li><li><a href="0392-deprecate-component-manager-string-lookup.html">0392-deprecate-component-manager-string-lookup</a></li><li><a href="0395-ember-data-packages.html" class="active">0395-ember-data-packages</a></li><li><a href="0398-RouteInfo-Metadata.html">0398-RouteInfo-Metadata</a></li><li><a href="0403-ember-data-identifiers.html">0403-ember-data-identifiers</a></li><li><a href="0408-decorators.html">0408-decorators</a></li><li><a href="0410-tracked-properties.html">0410-tracked-properties</a></li><li><a href="0415-render-element-modifiers.html">0415-render-element-modifiers</a></li><li><a href="0416-glimmer-components.html">0416-glimmer-components</a></li><li><a href="0418-deprecate-route-render-methods.html">0418-deprecate-route-render-methods</a></li><li><a href="0421-deprecate-application-controller-props.html">0421-deprecate-application-controller-props</a></li><li><a href="0425-website-redesign.html">0425-website-redesign</a></li><li><a href="0431-guides-restructure.html">0431-guides-restructure</a></li><li><a href="0432-contextual-helpers.html">0432-contextual-helpers</a></li><li><a href="0435-modifier-splattributes.html">0435-modifier-splattributes</a></li><li><a href="0440-decorator-support.html">0440-decorator-support</a></li><li><a href="0445-deprecate-with.html">0445-deprecate-with</a></li><li><a href="0446-contribution-guides.html">0446-contribution-guides</a></li><li><a href="0449-deprecate-partials.html">0449-deprecate-partials</a></li><li><a href="0451-injection-parameter-normalization.html">0451-injection-parameter-normalization</a></li><li><a href="0452-ember-data-medium-term-plan.html">0452-ember-data-medium-term-plan</a></li><li><a href="0457-nested-lookups.html">0457-nested-lookups</a></li><li><a href="0459-angle-bracket-built-in-components.html">0459-angle-bracket-built-in-components</a></li><li><a href="0460-yieldable-named-blocks.html">0460-yieldable-named-blocks</a></li><li><a href="0461-ember-data-singleton-record-data.html">0461-ember-data-singleton-record-data</a></li><li><a href="0463-record-data-state.html">0463-record-data-state</a></li><li><a href="0465-record-data-errors.html">0465-record-data-errors</a></li><li><a href="0466-request-state-service.html">0466-request-state-service</a></li><li><a href="0468-classic-decorator.html">0468-classic-decorator</a></li><li><a href="0470-fn-helper.html">0470-fn-helper</a></li><li><a href="0471-on-modifier.html">0471-on-modifier</a></li><li><a href="0478-tracked-properties-updates.html">0478-tracked-properties-updates</a></li><li><a href="0481-component-templates-co-location.html">0481-component-templates-co-location</a></li><li><a href="0486-deprecate-mouseenter.html">0486-deprecate-mouseenter</a></li><li><a href="0487-custom-model-classes.html">0487-custom-model-classes</a></li><li><a href="0491-deprecate-disconnect-outlet.html">0491-deprecate-disconnect-outlet</a></li><li><a href="0494-async-observers.html">0494-async-observers</a></li><li><a href="0521-find-by-identifier.html">0521-find-by-identifier</a></li><li><a href="0522-default-serializers-and-adapters.html">0522-default-serializers-and-adapters</a></li><li><a href="0523-model-argument-for-route-templates.html">0523-model-argument-for-route-templates</a></li><li><a href="0554-deprecate-getwithdefault.html">0554-deprecate-getwithdefault</a></li><li><a href="0558-edition-detection.html">0558-edition-detection</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title"></h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <ul>
<li>Start Date: 2018-10-31</li>
<li>Relevant Team(s): Ember Data</li>
<li>RFC PR: https://github.com/emberjs/rfcs/pull/395</li>
<li>Tracking: https://github.com/emberjs/rfc-tracking/issues/11</li>
</ul>
<h1><a class="header" href="#ember-data-packages" id="ember-data-packages">Ember Data Packages</a></h1>
<h2><a class="header" href="#summary" id="summary">Summary</a></h2>
<p>This documents presents the proposed <strong>public</strong> import path changes for <code>ember-data</code>, and moving <code>ember-data</code>
into the <code>@ember-data</code> namespace.</p>
<h2><a class="header" href="#motivation" id="motivation">Motivation</a></h2>
<p><strong>Reduce Confusion &amp; Bike Shedding</strong></p>
<p>Users of <code>ember-data</code> have often noted their confusion by the existence of both direct and &quot;god object&quot; (<code>DS.</code>) style
imports for modules from <code>ember-data</code>. The documentation currently uses primarily the <code>DS.</code> style, and users have
expressed interest and confusion over why the documentation has not been updated to reflect direct imports.</p>
<p><strong>Improve The TypeScript Experience</strong></p>
<p>Presence of multiple import locations confuses <code>Typescript</code>'s autocomplete, symbol resolution, and type hinting.</p>
<p><strong>Simplify The Mental Model</strong></p>
<p>Users of <code>ember-data</code> complain about the large API surface area; however, a large portion of this surface area is
non-essential user-land APIs that the provided adapter and serializer implementations expose. This move to packages
helps us simplify the mental model in three ways.</p>
<p>First: it gives us a natural way of dividing the documentation and learning story such that key concepts
and APIs are more discoverable.</p>
<p>Second: it allows us specifically to isolate the API surface area explosion of the provided adapter and serializer
implementations and make it clear that these are non-essential, replaceable APIs. E.G. it will help us to communicate
that these adapters and serializers are <em>an implementation</em>, <strong>not</strong> <em>the required implementation</em>.</p>
<p>Third: it clarifies the roles of several concepts within <code>ember-data</code> that are often misused today. Specifically:
the <code>embedded-records-mixin</code> should <em><em>only</em></em> be used with the <code>RESTAdapter</code>, and <code>transforms</code> are <em><em>only</em></em> a
serialization/deserialization concern and not a way of defining custom <code>attrs</code> or <code>types</code>. Furthermore, <code>transforms</code>
are only applicable to the serializer implementations that <code>ember-data</code> provides, and not to <code>custom</code> (and sometimes
not to <code>subclassed</code>) serializers.</p>
<p><strong>Improve the Contributor Experience</strong></p>
<p>Contributors to <code>ember-data</code> are faced with a large, complex project with poor code and test organization. This makes it
unduly difficult to discover what tests exist, where to add tests, where associated code lives, and even what parts of
the code base relate to the feature or bug that they are looking to address.</p>
<p>This move to packages will help us restructure the project and associated tests in a manner that is more discoverable.</p>
<p><strong>Provide a Clear Subdivision of Packages</strong></p>
<p>Today, <code>ember-data</code> is a large single package (<code>~35KB gzipped</code> in production). <code>ember-data</code> is often one of the largest
dependencies <code>emberjs</code> users have in their applications. However, not all users utilize all parts of <code>ember-data</code>, and
some users use very little. Providing these packages helps to clearly show the cost of various features, and better
allows us to enable end users to eliminate unneeded packages.</p>
<p>Users that implement their own adapter or serializers today must still carry the significant weight of the adapter and
serializer implementations that <code>ember-data</code> ships regardless. This is a weight we should enable these users to eliminate.</p>
<p>With the landing of <code>RecordData</code> and the merging of the <code>modelFactoryFor</code> RFC, it is likely that many applications
will soon require far less of <code>ember-data</code> than they do today. <code>ember-m3</code> is an example of a project that utilizes these
APIs in a way that requires significantly less of the <code>ember-data</code> experience.</p>
<p><strong>Provide Infrastructure for Additional Changes</strong></p>
<p><code>ember-data</code> is entering a period of extended evolution, of which <code>RecordData</code> and <code>modelFactoryFor</code> are only the early
pieces. For example, current thinking includes the possibility of <code>ember-data</code> evolving to provide an <code>ember-m3</code>-like
experience for <code>json-api</code> as the default out-of-the-box experience, and a rethinking of how we manage the request/response
lifecycle when fulfilling a request for data.</p>
<p>These experiences would live alongside the existing experience for a time prior to any deprecations of the current layer,
and it is possible that sometimes the current experience would never be deprecated. Subdividing <code>ember-data</code> into these
packages will enable us to provide a more seamless transition between these experiences without hoisting any package
size costs onto users that do not use either the current or the new experience.</p>
<h2><a class="header" href="#detailed-design" id="detailed-design">Detailed design</a></h2>
<p>This RFC proposes import paths following the guidelines established in <a href="https://github.com/emberjs/rfcs/pull/176">Ember Modules RFC #176</a>,
with two addendums to account for scenarios that weren't faced by <code>ember</code>:</p>
<ul>
<li><code>Error</code> sub-classes are named exports</li>
<li><code>Mixins</code> are named exports</li>
</ul>
<p>This is done to allow for continued grouping by common usage and mental model, where otherwise users would be faced with multiple imports from length file paths.</p>
<p>The following modules would continue to live in a monorepo that (until further RFC) would continue to live at <code>github.com/ember/data</code>.</p>
<table>
  <thead>
    <tr>
      <th colspan="2">Before</th>
      <th>After</th>
    </tr>
    <tr>
        <th>import DS from 'ember-data';</th>
        <th>Direct Import</th>
        <th>New Location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td colspan="3"><h3><a class="header" href="#ember-datamodel" id="ember-datamodel">@ember-data/model</a></h3></td>
    </tr>
    <tr>
      <td>DS.Model</td>
      <td>import Model from 'ember-data/model';</td>
      <td>import Model from '@ember-data/model';</td>
    </tr>
    <tr>
      <td>DS.attr</td>
      <td>import attr from 'ember-data/attr';</td>
      <td>import { attr } from '@ember-data/model';</td>
    </tr>
    <tr>
      <td>DS.belongsTo</td>
      <td>import { belongsTo } from 'ember-data/relationships';</td>
      <td>import { belongsTo } from '@ember-data/model';</td>
    </tr>
    <tr>
      <td>DS.hasMany</td>
      <td>import { hasMany } from 'ember-data/relationships';</td>
      <td>import { hasMany } from '@ember-data/model';</td>
    </tr>
    <tr>
      <td colspan="3"><h3><a class="header" href="#ember-dataadapter" id="ember-dataadapter">@ember-data/adapter</a></h3></td>
    </tr>
    <tr>
      <td>DS.Adapter</td>
      <td>import Adapter from 'ember-data/adapter';</td>
      <td>import Adapter from '@ember-data/adapter';</td>
    </tr>
    <tr>
      <td>DS.RESTAdapter</td>
      <td>import RESTAdapter from 'ember-data/adapters/rest';</td>
      <td>import RESTAdapter from '@ember-data/adapter/rest';</td>
    </tr>
    <tr>
      <td>DS.JSONAPIAdapter</td>
      <td>import JSONAPIAdapter from 'ember-data/adapters/json-api';</td>
      <td>import JSONAPIAdapter from '@ember-data/adapter/json-api';</td>
    </tr>
    <tr>
      <td>DS.BuildURLMixin</td>
      <td>none</td>
      <td>import { BuildURLMixin } from '@ember-data/adapter';</td>
    </tr>
    <tr>
      <td>DS.AdapterError</td>
      <td>import { AdapterError } from 'ember-data/adapters/errors';</td>
      <td>import AdapterError from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.InvalidError</td>
      <td>import { InvalidError } from 'ember-data/adapters/errors';</td>
      <td>import { InvalidError } from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.TimeoutError</td>
      <td>import { TimeoutError } from 'ember-data/adapters/errors';</td>
      <td>import { TimeoutError } from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.AbortError</td>
      <td>import { AbortError } from 'ember-data/adapters/errors';</td>
      <td>import { AbortError } from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.UnauthorizedError</td>
      <td>import { UnauthorizedError } from 'ember-data/adapters/errors';</td>
      <td>import { UnauthorizedError } from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.ForbiddenError</td>
      <td>import { ForbiddenError } from 'ember-data/adapters/errors';</td>
      <td>import { ForbiddenError } from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.NotFoundError</td>
      <td>import { NotFoundError } from 'ember-data/adapters/errors';</td>
      <td>import { NotFoundError } from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.ConflictError</td>
      <td>import { ConflictError } from 'ember-data/adapters/errors';</td>
      <td>import { ConflictError } from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.ServerError</td>
      <td>import { ServerError } from 'ember-data/adapters/errors';</td>
      <td>import { ServerError } from '@ember-data/adapter/error';</td>
    </tr>
    <tr>
      <td>DS.errorsHashToArray</td>
      <td>none</td>
      <td>import { errorsHashToArray } from '@ember-data/adapter/error';<br>
         <br>this public method should also be a candidate for deprecation
      </td>
    </tr>
    <tr>
      <td>DS.errorsArrayToHash</td>
      <td>none</td>
      <td>import { errorsArrayToHash } from '@ember-data/adapter/error';<br>
        <br>this public method should also be a candidate for deprecation
      </td>
    </tr>
    <tr>
      <td colspan="3"><h3><a class="header" href="#ember-dataserializer" id="ember-dataserializer">@ember-data/serializer</a></h3></td>
    </tr>
    <tr>
      <td>DS.Serializer</td>
      <td>import Serializer from 'ember-data/serializer';</td>
      <td>import Serializer from '@ember-data/serializer';</td>
    </tr>
    <tr>
      <td>DS.JSONSerializer</td>
      <td>import JSONSerializer from 'ember-data/serializers/json';</td>
      <td>import JSONSerializer from '@ember-data/serializer/json';</td>
    </tr>
    <tr>
      <td>DS.RESTSerializer</td>
      <td>import RESTSerializer from 'ember-data/serializers/rest';</td>
      <td>import RESTSerializer from '@ember-data/serializer/rest';</td>
    </tr>
    <tr>
      <td>DS.JSONAPISerializer</td>
      <td>import JSONAPISerializer from 'ember-data/serializers/json-api';</td>
      <td>import JSONAPISerializer from '@ember-data/serializer/json-api';</td>
    </tr>
    <tr>
      <td>DS.EmbeddedRecordsMixin</td>
      <td>import EmbeddedRecordsMixin from 'ember-data/serializers/embedded-records-mixin';</td>
      <td>import { EmbeddedRecordsMixin } from '@ember-data/serializer/rest';</td>
    </tr>
    <tr>
      <td>DS.Transform</td>
      <td>import Transform from 'ember-data/transform';</td>
      <td>import Transform from '@ember-data/serializer/transform';</td>
    </tr>
    <tr>
      <td colspan="3"><h3><a class="header" href="#ember-datastore" id="ember-datastore">@ember-data/store</a></h3></td>
    </tr>
    <tr>
      <td>DS.Store</td>
      <td>import Store from 'ember-data/store';</td>
      <td>import Store from '@ember-data/store';</td>
    </tr>
    <tr>
      <td>DS.Snapshot</td>
      <td>none</td>
      <td>none</td>
    </tr>
    <tr>
      <td>DS.PromiseArray</td>
      <td>none</td>
      <td>none</td>
    </tr>
    <tr>
      <td>DS.PromiseObject</td>
      <td>none</td>
      <td>none</td>
    </tr>
    <tr>
      <td>DS.RecordArray</td>
      <td>none</td>
      <td>none</td>
    </tr>
    <tr>
      <td>DS.AdapterPopulatedRecordArray</td>
      <td>none</td>
      <td>none</td>
    </tr>
    <tr>
      <td>DS.RecordarrayManager</td>
      <td>none</td>
      <td>none</td>
    </tr>
    <tr>
      <td>DS.normalizeModelName</td>
      <td>none</td>
      <td>import { normalizeModelName } from '@ember-data/store';<br>
        <br>this public method should be a candidate for deprecation
      </td>
    </tr>
    <tr>
      <td colspan="3"><h3><a class="header" href="#ember-datarecord-data" id="ember-datarecord-data">@ember-data/record-data</a></h3></td>
    </tr>
    <tr>
      <td>none</td>
      <td>import { RecordData } from 'ember-data/-private';</td>
      <td>import RecordData from '@ember-data/record-data';</td>
    </tr>
    <tr>
      <td colspan="3"><h3><a class="header" href="#ember-datarelationship-layer" id="ember-datarelationship-layer">@ember-data/relationship-layer</a></h3></td>
    </tr>
    <tr>
      <td>DS.Relationship</td>
      <td>none</td>
      <td>none</td>
    </tr>
    <tr>
      <td colspan="3"><h3><a class="header" href="#ember-datadebug" id="ember-datadebug">@ember-data/debug</a></h3></td>
    </tr>
    <tr>
      <td>DS.DebugAdapter</td>
      <td>none</td>
      <td>none</td>
    </tr>
  </tbody>
</table>
<h3><a class="header" href="#notes" id="notes">Notes</a></h3>
<h4><a class="header" href="#ember-datamodel-1" id="ember-datamodel-1"><code>@ember-data/model</code></a></h4>
<ol>
<li>
<p><code>InternalModel</code> and <code>RootState</code> are tightly coupled to the store and to our provided <code>Model</code>
implementation. Over time we need to uncouple this, but given their coupling to <code>Model</code> and our
desire to enable them to be eliminated from projects not using <code>Model</code>, these concepts belong in <code>@ember-data/model</code>, although they will not be given direct import paths.</p>
</li>
<li>
<p>The following belong in <code>@ember-data/model</code> and not in <code>@ember-data/relationship-layer</code> with
relationships.  While this presents a mild risk of confusion due to the presence of the
<code>relationship-layer</code> package, the argument for their presence here is they are a ui-layer concern being coupled to the current <code>Model</code> presentation layer and not related to overall state management
of relationships which could itself be used with alternative implementations.</p>
</li>
</ol>
<ul>
<li><code>belongsTo</code></li>
<li><code>hasMany</code></li>
</ul>
<ol start="3">
<li>The following have the same considerations as #2 but they will not be given direct import paths.</li>
</ol>
<ul>
<li><code>PromiseManyArray</code></li>
<li><code>ManyArray</code></li>
</ul>
<h4><a class="header" href="#ember-dataserializers" id="ember-dataserializers"><code>@ember-data/serializers</code></a></h4>
<ol>
<li>We should move automatic registration of transforms into a more traditional
<code>app/</code> directory re-export for the package so that when the package is dropped they
cleanly drop as well.</li>
</ol>
<h4><a class="header" href="#ember-datarelationship-layer-1" id="ember-datarelationship-layer-1"><code>@ember-data/relationship-layer</code></a></h4>
<p>This package seems thin but it's likely to hold quite a bit.
Additional private things that would be moved here:</p>
<ul>
<li>everything in <code>-private/system/relationships/state</code></li>
<li><code>BelongsToReference</code> and <code>HasManyReference</code></li>
<li>relationship logic from <code>store</code> / <code>internal-model</code> that need to be isolated and extracted</li>
</ul>
<h4><a class="header" href="#ember-datadebug-1" id="ember-datadebug-1"><code>@ember-data/debug</code></a></h4>
<p>Moving <code>DebugAdapter</code> here would allow dropping it if not desired. Additionally we should likely
RFC dropping it for production builds where it adds persistent unnecessary overhead for a tool
meant for devs. This exists to support the ember inspector.</p>
<h3><a class="header" href="#documented-public-apis-without-public-import-paths" id="documented-public-apis-without-public-import-paths">Documented Public APIs without public import paths</a></h3>
<p>There are a few public classes that are not exposed at all via <code>export</code> today. Those classes will not be given
public export paths, but the package containing their documentation and implementation is shown here:</p>
<ul>
<li><code>@ember-data/store</code>
<ul>
<li><code>Reference</code></li>
<li><code>RecordReference</code></li>
<li><code>StoreWrapper</code></li>
</ul>
</li>
<li><code>@ember-data/relationship-layer</code>
<ul>
<li><code>BelongsToReference</code></li>
<li><code>HasManyReference</code></li>
</ul>
</li>
<li><code>@ember-data/model</code>
<ul>
<li><code>PromiseBelongsTo</code></li>
<li><code>PromiseRecord</code></li>
</ul>
</li>
</ul>
<h2><a class="header" href="#migration" id="migration">Migration</a></h2>
<p>Blueprints, guides, docs, and twiddle would be updated to use the new <code>@ember-data/</code> package imports.</p>
<p>A codemod would be provided to convert from the existing import locations to the new ones, as well as lint rules for encouraging their use.</p>
<p>The package <code>ember-data</code> would continue to exist, much like <code>ember-source</code>. Initially, this package would provide all of the subpackages
as dependencies as well as the respective re-exports for supporting the existing import paths. After a time, the existing paths would
be deprecated.</p>
<p>Users who have resolved the deprecations may choose to convert to consuming only the packages they still require directly,
by dropping <code>ember-data</code> from their <code>package.json</code> and adding in the individual <code>@ember-data/</code> packages as necessary.</p>
<p>Ultimately, the default <code>ember-data</code> story in <code>ember-cli</code> would change to install select packages from <code>@ember-data</code> directly.</p>
<h2><a class="header" href="#how-we-teach-this" id="how-we-teach-this">How we teach this</a></h2>
<p>This RFC should be seen as a continuation of the <code>javascript-modules</code> RFC that defined explicit import paths for <code>emberjs</code>.</p>
<p>Codemods and lint rules would be provided to convert existing imports to the new syntax. Existing import locations
would continue to exist for a time but would at some point in the future be made to print build-time deprecations.</p>
<p>End users would need to run the codemod at some point, but no other changes will be required.</p>
<p>Ember documentation and guides would be updated to reflect these new import paths as well as to utilize the new package
divisions to improve the teaching story.</p>
<h2><a class="header" href="#drawbacks" id="drawbacks">Drawbacks</a></h2>
<ul>
<li>A Tiny amount of churn</li>
<li>Sub-packages will require sprinkling significant numbers of excess package.json files throughout our repo.</li>
<li>Our import paths may not align with the expected mental model for addon import paths going forward (no <code>/src/</code> in path)</li>
</ul>
<h2><a class="header" href="#alternatives" id="alternatives">Alternatives</a></h2>
<ol>
<li>Divide into packages without exposing the new division publicly</li>
</ol>
<ul>
<li><em>argument for:</em> Don't expose churn to end users without a clear win, we aren't 100% sure what belongs in a vague
&quot;future ember-data&quot;, so wait until we are sure.</li>
<li><em>rebuttal:</em> The churn is minimal and mostly automated (codemod). There are clear wins here for many users. We
should not hold up progress now on an uncertain future. Dividing into packages now gives us more options for how to
manage future evolution. Regardless of when we become certain of what belongs in &quot;future ember-data&quot;, these packages
would need to exist alongside at least for a time.</li>
</ul>
<ol start="2">
<li>Don't divide into packages until nebulous future RFCs have landed</li>
</ol>
<ul>
<li><em>argument for:</em> This argument is an extension of <em>alternative 1</em> in which we wait for specific concepts to mature and
materialize that we have discussed internally, including a significant rework of how we manage the <code>request/response</code>
lifecycle. These new feature RFCs would come with corresponding deprecation RFCs for parts of the system they either
fully replace or make vestigial.</li>
<li><em>rebuttal:</em> The argument here is a variation of the argument in <em>alternative 1</em> and the rebuttal merely extends
that rebuttal as well. These future deprecations would necessarily be long-tail, if we deprecate at all. There is
the option to have both old and new experiences live side-by-side. Additionally, if we deprecate and then land
<code>@ember-data/packages</code> there is both an equal amount of churn and fewer options for how to manage those deprecations.</li>
</ul>
<ol start="3">
<li>Use the <code>@ember</code> namespace.</li>
</ol>
<ul>
<li>
<p><em>argument for:</em> <code>ember-data</code> is an official package and we wish to position it centrally within the <code>ember</code>
ecosystem. This <a href="https://github.com/emberjs/rfcs/pull/238#issuecomment-318745236">argument has been presented</a>
by other core teams in response to previous attempts to move forward with a packages RFC for <code>ember-data</code>.</p>
</li>
<li>
<p><em>rebuttal:</em> <code>ember-cli</code> and <code>glimmer</code> are also official packages, but with their own namespaces. Additionally
re-using the <code>@ember</code> namespace would only further confusion that many folks already have regarding:</p>
<ul>
<li>where <code>ember</code> ends and <code>ember-data</code> begins.</li>
<li>whether <code>ember-data</code> is required or optional</li>
<li>whether other data layers are seen as &quot;bad practices&quot; (they are not)</li>
<li>what packages are provided by <code>ember-data</code> vs <code>ember</code>
<code>ember-data</code>'s status as a team, in the guides and in release blog posts on <code>emberjs.com</code>, as well as presence in
the default blueprint provided by <code>ember-cli</code> make clear it's status as an official offering. Using the <code>@ember</code>
namespace is not required for this.</li>
</ul>
<p>This argument also necessarily foments an untrue presupposition: that <code>ember-data</code> is the right choice for every app.
While we strive to make this the case, it would be very difficult to claim this today, and may never be true,
as every app presents unique concerns and needs.</p>
<p>Finally, using the <code>@ember</code> namespace would leave us in the unfortunate position of either always scoping all of our
packages to <code>@ember/data/</code> or of fighting with <code>emberjs</code> for package names.</p>
</li>
</ul>
<ol start="4">
<li>This RFC but with Adapters and Serializers broken out into the packages <code>@ember-data/json</code> <code>@ember-data/rest</code> <code>@ember-data/json-api</code>.</li>
</ol>
<ul>
<li>
<p><em>argument for:</em> grouping the adapter / serializer &quot;by API spec&quot; feels more natural and would allow for users to drop only the versions of adapters / serializer they don't require.</p>
</li>
<li>
<p><em>rebuttal:</em> Even without considering future changes to <code>ember-data</code>'s API surface, there are several issues with this approach.</p>
<ol>
<li>
<p>The implementations inherit each other:</p>
<ul>
<li><code>JSONAPISerializer extends RESTSerializer extends JSONSerializer extends Serializer</code></li>
<li><code>JSONAPIAdapter extends RESTAdapter extends Adapter</code></li>
</ul>
</li>
<li>
<p>The adapter / serializer pairings aren't coupled</p>
<ul>
<li>It is fairly common to use the <code>JSONAPIAdapter</code> with the <code>RESTSerializer</code> or
with a custom serializer that extends the <code>RESTSerializer</code> and vice-verse.</li>
<li>Even when using a consistent spec (<code>json-api</code> or <code>rest</code>) it is common to need
a fully custom serializer. The division of needs is at least equally between
adapter/serializer as it is between specs.</li>
</ul>
</li>
<li>
<p>Transforms are an implementation detail for all the provided serializers</p>
<ul>
<li>But they  are not required and likely not even used by custom serializers.</li>
</ul>
</li>
<li>
<p>Packages for automatically registered fallbacks would fit poorly.</p>
<ul>
<li>Serializers: <code>&quot;-default&quot;</code> <code>&quot;-rest&quot;</code> <code>&quot;-json-api&quot;</code></li>
<li>Adapters: <code>&quot;-rest&quot;</code> <code>&quot;-json-api&quot;</code></li>
</ul>
</li>
<li>
<p>Today, we use multiple serializers for a single type based on entry-point</p>
<ul>
<li><code>Model.serialize</code> (per-type) / <code>Model.toJSON</code> (<code>&quot;-json&quot;</code>) / <code>Adapter.serialize</code> (per-adapter)</li>
</ul>
</li>
</ol>
<p>That said, this organization is also one of the only-nods
to future RFCs this RFC concedes. The existing provided implementations all follow roughly the same interface for their implementations, and that interface is something we strongly wish to change. For this reason, it seems advantageous to keep the existing implementations together such that the delineation between a new experience and this experience can be kept clear.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="0392-deprecate-component-manager-string-lookup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="0398-RouteInfo-Metadata.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="0392-deprecate-component-manager-string-lookup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="0398-RouteInfo-Metadata.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
