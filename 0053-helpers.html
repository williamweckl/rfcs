<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>0053-helpers - </title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="affix"><a href="introduction.html">Introduction</a></li><li><a href="0001-transform-attribute-meta-parameter.html">0001-transform-attribute-meta-parameter</a></li><li><a href="0003-block-params.html">0003-block-params</a></li><li><a href="0003-cli-ember-doctor.html">0003-cli-ember-doctor</a></li><li><a href="0010-engines.html">0010-engines</a></li><li><a href="0011-improved-cp-syntax.html">0011-improved-cp-syntax</a></li><li><a href="0012-help-json-output.html">0012-help-json-output</a></li><li><a href="0015-the-road-to-ember-2-0.html">0015-the-road-to-ember-2-0</a></li><li><a href="0020-sri-default.html">0020-sri-default</a></li><li><a href="0023-command-line-completion.html">0023-command-line-completion</a></li><li><a href="0024-bound-attributes.html">0024-bound-attributes</a></li><li><a href="0028-app-import-output-file.html">0028-app-import-output-file</a></li><li><a href="0029-addon-black-and-whitelist-for-apps.html">0029-addon-black-and-whitelist-for-apps</a></li><li><a href="0045-internet-explorer.html">0045-internet-explorer</a></li><li><a href="0046-cli-improved-release-process.html">0046-cli-improved-release-process</a></li><li><a href="0046-registry-reform.html">0046-registry-reform</a></li><li><a href="0050-cli-production-code-stripping.html">0050-cli-production-code-stripping</a></li><li><a href="0050-improved-actions.html">0050-improved-actions</a></li><li><a href="0053-helpers.html" class="active">0053-helpers</a></li><li><a href="0055-anonymous-amd.html">0055-anonymous-amd</a></li><li><a href="0056-improved-release-cycle.html">0056-improved-release-cycle</a></li><li><a href="0057-ember-data-reference-unification.html">0057-ember-data-reference-unification</a></li><li><a href="0058-helper-listing.html">0058-helper-listing</a></li><li><a href="0061-ember-data-background-fetch.html">0061-ember-data-background-fetch</a></li><li><a href="0064-contextual-component-lookup.html">0064-contextual-component-lookup</a></li><li><a href="0065-deprecation-warning-handlers.html">0065-deprecation-warning-handlers</a></li><li><a href="0080-serve-file-api.html">0080-serve-file-api</a></li><li><a href="0086-firefox-in-ci.html">0086-firefox-in-ci</a></li><li><a href="0090-addon-tree-caching.html">0090-addon-tree-caching</a></li><li><a href="0091-cli-addon-instrumentation-experimental-hooks.html">0091-cli-addon-instrumentation-experimental-hooks</a></li><li><a href="0091-weakmap.html">0091-weakmap</a></li><li><a href="0092-blueprint-remove-old-files.html">0092-blueprint-remove-old-files</a></li><li><a href="0095-cli-standardise-targets.html">0095-cli-standardise-targets</a></li><li><a href="0095-router-service.html">0095-router-service</a></li><li><a href="0096-enable-yarn-usage.html">0096-enable-yarn-usage</a></li><li><a href="0101-ember-data-friendly-errors.html">0101-ember-data-friendly-errors</a></li><li><a href="0105-addons-optionalDependencies.html">0105-addons-optionalDependencies</a></li><li><a href="0108-add-custom-transform.html">0108-add-custom-transform</a></li><li><a href="0110-packaging.html">0110-packaging</a></li><li><a href="0114-add-template-lint-addon.html">0114-add-template-lint-addon</a></li><li><a href="0116-qunit-dom.html">0116-qunit-dom</a></li><li><a href="0120-cli-guides.html">0120-cli-guides</a></li><li><a href="0120-route-serializers.html">0120-route-serializers</a></li><li><a href="0121-remove-ember-cli-eslint.html">0121-remove-ember-cli-eslint</a></li><li><a href="0136-contains-to-includes.html">0136-contains-to-includes</a></li><li><a href="0139-isHtmlSafe.html">0139-isHtmlSafe</a></li><li><a href="0143-module-unification.html">0143-module-unification</a></li><li><a href="0150-factory-for.html">0150-factory-for</a></li><li><a href="0176-javascript-module-api.html">0176-javascript-module-api</a></li><li><a href="0178-deprecate-ember-k.html">0178-deprecate-ember-k</a></li><li><a href="0181-deprecate-ember-data-initializers.html">0181-deprecate-ember-data-initializers</a></li><li><a href="0186-track-unique-history-location-state.html">0186-track-unique-history-location-state</a></li><li><a href="0191-deprecate-component-lifecycle-hook-args.html">0191-deprecate-component-lifecycle-hook-args</a></li><li><a href="0194-deprecate-custom-event-manager.html">0194-deprecate-custom-event-manager</a></li><li><a href="0213-custom-components.html">0213-custom-components</a></li><li><a href="0225-ember-engines-mount-params.html">0225-ember-engines-mount-params</a></li><li><a href="0226-named-blocks.html">0226-named-blocks</a></li><li><a href="0229-deprecate-testing-restricted-resolver.html">0229-deprecate-testing-restricted-resolver</a></li><li><a href="0232-simplify-qunit-testing-api.html">0232-simplify-qunit-testing-api</a></li><li><a href="0236-deprecation-ember-string.html">0236-deprecation-ember-string</a></li><li><a href="0237-deprecation-ember-map.html">0237-deprecation-ember-map</a></li><li><a href="0240-es-classes.html">0240-es-classes</a></li><li><a href="0252-browser-support-changes.html">0252-browser-support-changes</a></li><li><a href="0268-acceptance-testing-refactor.html">0268-acceptance-testing-refactor</a></li><li><a href="0272-deprecation-native-function-prototype-extensions.html">0272-deprecation-native-function-prototype-extensions</a></li><li><a href="0276-named-args.html">0276-named-args</a></li><li><a href="0278-template-only-components.html">0278-template-only-components</a></li><li><a href="0280-remove-application-wrapper.html">0280-remove-application-wrapper</a></li><li><a href="0281-es5-getters.html">0281-es5-getters</a></li><li><a href="0286-block-let-template-helper.html">0286-block-let-template-helper</a></li><li><a href="0287-promote-in-element-to-public-api.html">0287-promote-in-element-to-public-api</a></li><li><a href="0293-record-data.html">0293-record-data</a></li><li><a href="0294-optional-jquery.html">0294-optional-jquery</a></li><li><a href="0297-deprecate-ember-logger.html">0297-deprecate-ember-logger</a></li><li><a href="0300-rfc-process-update.html">0300-rfc-process-update</a></li><li><a href="0308-deprecate-property-lookup-fallback.html">0308-deprecate-property-lookup-fallback</a></li><li><a href="0311-angle-bracket-invocation.html">0311-angle-bracket-invocation</a></li><li><a href="0318-array-helper.html">0318-array-helper</a></li><li><a href="0322-deprecate-copy-copyable.html">0322-deprecate-copy-copyable</a></li><li><a href="0324-deprecate-component-isvisible.html">0324-deprecate-component-isvisible</a></li><li><a href="0326-ember-data-filter-deprecation.html">0326-ember-data-filter-deprecation</a></li><li><a href="0329-deprecated-ember-evented-in-ember-data.html">0329-deprecated-ember-evented-in-ember-data</a></li><li><a href="0331-deprecate-globals-resolver.html">0331-deprecate-globals-resolver</a></li><li><a href="0332-ember-data-record-links-and-meta.html">0332-ember-data-record-links-and-meta</a></li><li><a href="0335-deprecate-send-action.html">0335-deprecate-send-action</a></li><li><a href="0337-native-class-constructor-update.html">0337-native-class-constructor-update</a></li><li><a href="0340-deprecate-ember-merge.html">0340-deprecate-ember-merge</a></li><li><a href="0345-discord.html">0345-discord</a></li><li><a href="0364-roadmap-2018.html">0364-roadmap-2018</a></li><li><a href="0369-deprecate-computed-clobberability.html">0369-deprecate-computed-clobberability</a></li><li><a href="0370-deprecate-computed-volatile.html">0370-deprecate-computed-volatile</a></li><li><a href="0372-ember-data-model-factory-for.html">0372-ember-data-model-factory-for</a></li><li><a href="0373-Element-Modifier-Managers.html">0373-Element-Modifier-Managers</a></li><li><a href="0375-deprecate-computed-property-modifier.html">0375-deprecate-computed-property-modifier</a></li><li><a href="0386-remove-jquery.html">0386-remove-jquery</a></li><li><a href="0389-dynamic-tag-names.html">0389-dynamic-tag-names</a></li><li><a href="0391-router-helpers.html">0391-router-helpers</a></li><li><a href="0392-deprecate-component-manager-string-lookup.html">0392-deprecate-component-manager-string-lookup</a></li><li><a href="0395-ember-data-packages.html">0395-ember-data-packages</a></li><li><a href="0398-RouteInfo-Metadata.html">0398-RouteInfo-Metadata</a></li><li><a href="0403-ember-data-identifiers.html">0403-ember-data-identifiers</a></li><li><a href="0408-decorators.html">0408-decorators</a></li><li><a href="0410-tracked-properties.html">0410-tracked-properties</a></li><li><a href="0415-render-element-modifiers.html">0415-render-element-modifiers</a></li><li><a href="0416-glimmer-components.html">0416-glimmer-components</a></li><li><a href="0418-deprecate-route-render-methods.html">0418-deprecate-route-render-methods</a></li><li><a href="0421-deprecate-application-controller-props.html">0421-deprecate-application-controller-props</a></li><li><a href="0425-website-redesign.html">0425-website-redesign</a></li><li><a href="0431-guides-restructure.html">0431-guides-restructure</a></li><li><a href="0432-contextual-helpers.html">0432-contextual-helpers</a></li><li><a href="0435-modifier-splattributes.html">0435-modifier-splattributes</a></li><li><a href="0440-decorator-support.html">0440-decorator-support</a></li><li><a href="0445-deprecate-with.html">0445-deprecate-with</a></li><li><a href="0446-contribution-guides.html">0446-contribution-guides</a></li><li><a href="0449-deprecate-partials.html">0449-deprecate-partials</a></li><li><a href="0451-injection-parameter-normalization.html">0451-injection-parameter-normalization</a></li><li><a href="0452-ember-data-medium-term-plan.html">0452-ember-data-medium-term-plan</a></li><li><a href="0457-nested-lookups.html">0457-nested-lookups</a></li><li><a href="0459-angle-bracket-built-in-components.html">0459-angle-bracket-built-in-components</a></li><li><a href="0460-yieldable-named-blocks.html">0460-yieldable-named-blocks</a></li><li><a href="0461-ember-data-singleton-record-data.html">0461-ember-data-singleton-record-data</a></li><li><a href="0463-record-data-state.html">0463-record-data-state</a></li><li><a href="0465-record-data-errors.html">0465-record-data-errors</a></li><li><a href="0466-request-state-service.html">0466-request-state-service</a></li><li><a href="0468-classic-decorator.html">0468-classic-decorator</a></li><li><a href="0470-fn-helper.html">0470-fn-helper</a></li><li><a href="0471-on-modifier.html">0471-on-modifier</a></li><li><a href="0478-tracked-properties-updates.html">0478-tracked-properties-updates</a></li><li><a href="0481-component-templates-co-location.html">0481-component-templates-co-location</a></li><li><a href="0486-deprecate-mouseenter.html">0486-deprecate-mouseenter</a></li><li><a href="0487-custom-model-classes.html">0487-custom-model-classes</a></li><li><a href="0491-deprecate-disconnect-outlet.html">0491-deprecate-disconnect-outlet</a></li><li><a href="0494-async-observers.html">0494-async-observers</a></li><li><a href="0521-find-by-identifier.html">0521-find-by-identifier</a></li><li><a href="0522-default-serializers-and-adapters.html">0522-default-serializers-and-adapters</a></li><li><a href="0523-model-argument-for-route-templates.html">0523-model-argument-for-route-templates</a></li><li><a href="0554-deprecate-getwithdefault.html">0554-deprecate-getwithdefault</a></li><li><a href="0558-edition-detection.html">0558-edition-detection</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title"></h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <ul>
<li>Start Date: 2015-05-17</li>
<li>RFC PR: https://github.com/emberjs/rfcs/pull/53</li>
<li>Ember Issue: https://github.com/emberjs/ember.js/pull/11278</li>
</ul>
<h1><a class="header" href="#summary" id="summary">Summary</a></h1>
<p>Ember.js 1.13 will introduce a new API for helpers. Helpers will come in two
flavors:</p>
<p><strong>Helpers</strong> are a class-based way to define HTMLBars subexpressions. Helpers:</p>
<ul>
<li>Have a single return value.</li>
<li>Must have a dash in their name.</li>
<li>Cannot be used as a block (<code>{{#some-helper}}{{/some-helper}}</code>).</li>
<li>Can store and read state.</li>
<li>Have lifecycle hooks analogous to components where appropriate. For
example, a helper may call <code>recompute</code> at any time to generate a new
value (this is akin to <code>rerender</code>).</li>
<li>Are a superset of shorthand helpers, the function-based syntax described
below. They can do more, but in many cases a shorthand helper is appropriate.</li>
</ul>
<p><strong>Shorthand helpers</strong> are a function-based way to define HTMLBars
subexpressions. Helpers written this way:</p>
<ul>
<li>Have all the limitations of regular helpers.</li>
<li>Have no instance associated with them, cannot store or read state.</li>
<li>Have no lifecycle hooks. The function is simply re-computed when any input
changes.</li>
</ul>
<p>These improved helpers fill a gap in Ember's current template APIs:</p>
<table><thead><tr><th></th><th>has positional params</th><th>has layout (shadow DOM)</th><th>can yield template</th><th>has lifecycle, instance</th><th>can control rerender</th></tr></thead><tbody>
<tr><td>components</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td></tr>
<tr><td>helpers</td><td>Yes</td><td>No</td><td>No</td><td>Yes</td><td>Yes</td></tr>
<tr><td>shorthand helpers</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td></tr>
</tbody></table>
<p>An example helper:</p>
<pre><code class="language-js">// app/helpers/full-name.js
import Ember from &quot;ember&quot;;

export default Ember.Helper.extend({
  nameBuilder: Ember.inject.service(),
  compute(params) {
    const builder = this.get('nameBuilder');
    return builder.fullName(params[0], params[1]);
  }
});
</code></pre>
<p>An example shorthand helper:</p>
<pre><code class="language-js">// app/helpers/full-name.js
import Ember from &quot;ember&quot;;

export default Ember.Helper.helper(function(params, hash) {
  let fullName = params.join(' ');
  if (hash.honorific) {
    fullName = `${hash.honorific} ${fullName}`
  }
  return fullName;
});
</code></pre>
<p>Helpers can be used anywhere an HTMLBars subexpression is valid:</p>
<pre><code class="language-hbs">{{full-name 'Bigtime' 'Beagle'}}
{{input value=(full-name 'Gyro' 'Gearloose') readonly=true}}
{{#if (eq (full-name 'Webbigail' 'Vanderquack') selectedFullName))}}
  You have chosen wisely.
{{/if}}
</code></pre>
<h1><a class="header" href="#motivation" id="motivation">Motivation</a></h1>
<p>Ember.js 1.13 make a private API change that removed the ability to access
application containers. <code>Ember.HTMLBars._registerHelper</code> was previously passed
the <code>env</code> object, and this was removed as it is an internal implementation
detail.</p>
<p>Ember's helper API has not kept pace with improvements possible
after the introduction of HTMLBars. This has resulted in the community using
a variety of private APIs, many of which leak information about the outer
context of a helpers invocation as well as the render layer implementation.</p>
<p>The current public API is:</p>
<ul>
<li><a href="http://emberjs.com/api/classes/Ember.Handlebars.html#method_makeBoundHelper">Ember.Handlebars.makeBoundHelper</a></li>
</ul>
<p>This API is sorely lacking in functionality required by addon authors.</p>
<ul>
<li>Has no access to other parts of the app, like services</li>
<li>Leaks a private API for dealing with blocks</li>
<li>Results in less efficient helpers due to the Handlebars compatibility layer</li>
<li>Has poor support for hash arguments</li>
</ul>
<p>Additionally it remains difficult to write a helper that recomputes due to
something besides the change of its input.</p>
<p>Specifically, this RFC addresses many of the concerns in
<a href="https://github.com/emberjs/ember.js/issues/11080">emberjs/ember.js#11080</a>.
Libraries such as <a href="https://github.com/yahoo/ember-intl">yahoo/ember-intl</a>,
<a href="https://github.com/dockyard/ember-cli-i18n">dockyard/ember-cli-i18n</a>, and
<a href="https://github.com/minutebase/ember-can">minutebase/ember-can</a> will be
provided a viable public API to couple to.</p>
<h1><a class="header" href="#detailed-design" id="detailed-design">Detailed design</a></h1>
<p>Helpers must have a dash in their name. In an Ember-CLI app, they can be named
according to the <code>app/helpers/full-name.js</code> convention (<code>app/full-name/helper.js</code>
in pods mode). For a globals app, naming a helper <code>App.FullNameHelper</code> is
sufficient.</p>
<h3><a class="header" href="#definition-and-lifecycle" id="definition-and-lifecycle">Definition and lifecycle</a></h3>
<p>A helper is defined as a class inheriting from <code>Ember.Helper</code>. For
example:</p>
<pre><code class="language-js">// app/helpers/hello-world.js
import Ember from &quot;ember&quot;;

// Usage: {{hello-world}}
export default Ember.Helper.extend({
  compute() {
    return &quot;Hello Helper World&quot;;
  }
});
</code></pre>
<p>Upon initial render:</p>
<ul>
<li>The helper instance is created.</li>
<li>The <code>compute</code> method is called. The return value is outputted where the
helper is used. For example in <code>&lt;div class={{some-helper}}&gt;&lt;/div&gt;</code> the return
value is set to the class.</li>
</ul>
<p>The <code>compute</code> function is always called with <code>params</code> (the bare, ordered
arguments) and <code>hash</code> (the named arguments). For example:</p>
<pre><code class="language-js">// app/helpers/greet-someone.js
import Ember from &quot;ember&quot;;

// Usage: {{greet-someone 'bob' greeting='say hello'}}
export default Ember.Helper.extend({
  compute(params, hash) {
    return `Hello ${params[0]}, nice to ${hash.greeting}`;
  }
});
</code></pre>
<p>Which functions the same as this shorthand:</p>
<pre><code class="language-js">// app/helpers/greet-someone.js
import Ember from &quot;ember&quot;;

// Usage: {{greet-someone 'bob' greeting='say hello'}}
export default Ember.Helper.helper(function(params, hash) {
  return `Hello ${params[0]}, nice to ${hash.greeting}`;
});
</code></pre>
<p>When the <code>params</code> or <code>hash</code> contents change, the <code>compute</code> method is called
again. The instance of the helper is preserved across rerenders of the parent.
A shorthand helper, having no instance, is called every time a bound
argument changes.</p>
<p>The <code>init</code> and <code>destroy</code> methods can be subclassed for setup and teardown.</p>
<h3><a class="header" href="#consuming-a-helper" id="consuming-a-helper">Consuming a helper</a></h3>
<p>Helpers can be used anywhere an HTMLBars subexpression can be
used. For example:</p>
<pre><code class="language-hbs">{{#if (can-access 'admin')}}
  {{link-to 'login'}}
{{/if}}
{{#if (eq (can-access 'admin') false)}}
  No login for you
{{/if}}
&lt;my-login-button isAdmin={{can-access 'admin'}} /&gt;
Can access? {{can-access 'admin'}}
</code></pre>
<p>Passing a helper to a <code>{{</code>- invoked component skips the auto-<code>mut</code> behavior:</p>
<pre><code class="language-hbs">{{my-login-button isAdmin=(can-access 'admin')}}
</code></pre>
<p>Let's step through exactly what happens when using an helper like this:</p>
<pre><code class="language-hbs">&lt;my-login-button isAdmin={{can-access 'admin'}} /&gt;
</code></pre>
<p>Upon initial render:</p>
<ul>
<li>The helper <code>can-access</code> is looked up on the container</li>
<li>The helper is identified as a full helper, not a shorthand helper function</li>
<li>The helper is initialized (<code>init</code> is called)</li>
<li>The <code>compute</code> function is called on the helper.</li>
<li>The return value from <code>compute</code> is passed as an <code>attr</code> to <code>my-login-button</code>.</li>
<li>The helper instance remains in memory.</li>
</ul>
<p>If the parent scope is rerendered:</p>
<ul>
<li>The <code>compute</code> function is called again.</li>
<li>The return value from <code>compute</code> is passed as an <code>attr</code> to <code>my-login-button</code>.</li>
</ul>
<p>Upon teardown:</p>
<ul>
<li>The helper is destroyed, calling the <code>destroy</code> method.</li>
</ul>
<h3><a class="header" href="#returning-a-value" id="returning-a-value">Returning a value</a></h3>
<p>The return value of helper is passed through to where their subexpression
is called. For example, given a helper (this one a shorthand helper):</p>
<pre><code class="language-js">// app/helpers/full-name.js
import Ember from &quot;ember&quot;;

export default Ember.Helper.helper(function fullName(params, hash) {
  return params.join(' ');
}
</code></pre>
<p>The following are effectively the same:</p>
<pre><code class="language-hbs">&lt;div data-name={{full-name &quot;Fenton&quot; &quot;Crackshell&quot;}}&gt;&lt;/div&gt;
&lt;div data-name={{&quot;Fenton Crackshell&quot;}}&gt;&lt;/div&gt;
</code></pre>
<pre><code class="language-hbs">{{my-component name=(full-name &quot;Magica&quot; &quot;De Spell&quot;)}}
{{my-component name=&quot;Magica De Spell&quot;}}
</code></pre>
<pre><code class="language-hbs">&lt;p&gt;{{full-name &quot;Bentina&quot; &quot;Beakley&quot;}}&lt;/p&gt;
&lt;p&gt;{{&quot;Bentina Beakley&quot;}}&lt;/p&gt;
</code></pre>
<p>An exclusion to this pattern is the following form:</p>
<pre><code class="language-hbs">&lt;div {{full-name &quot;Webbigail&quot; &quot;Vanderquack&quot;}}&gt;&lt;/div&gt;
</code></pre>
<p>This is a legacy form of mustache usage. Helpers will throw an exception when
used in this manner.</p>
<h3><a class="header" href="#consuming-services-and-recompute" id="consuming-services-and-recompute">Consuming services and recompute</a></h3>
<p>Helpers are a valid target for service injection. For example:</p>
<pre><code class="language-js">// app/helpers/current-user-name.js
import Ember from &quot;ember&quot;;

export default Ember.Helper.extend({
  // Same API as components:
  session: Ember.inject.service(),
  compute() {
    return this.get('session.currentUser.name');
  }
});
</code></pre>
<p>However consuming a property from a service does not bind the data being
displayed to that property. After <code>{{current-user-name}}</code> has been computed
and rendered, it will never be invalidated.</p>
<p>For this reason, helpers are granted some control over their
computation lifecycle. A helper will recompute when:</p>
<ul>
<li>A value passed via the template changes (<code>params</code> or <code>hash</code>)</li>
<li>The <code>recompute</code> method is called</li>
</ul>
<p>For example, this helper checks if the current use has access to a
resource type:</p>
<pre><code class="language-js">// app/helpers/can-access.js
import Ember from &quot;ember&quot;;

// Usage {{if (can-access 'admin') 'Welcome, boss' 'Heck no!'}}
export default Ember.Helper.extend({
  session: Ember.inject.service(),
  onCurrentUserChange: Ember.observes('session.currentUser', function() {
    this.recompute();
  }),
  compute(params) {
    const currentUser = this.get('session.currentUser');
    return currentUser.can(params[0]);
  }
});
</code></pre>
<h1><a class="header" href="#drawbacks" id="drawbacks">Drawbacks</a></h1>
<p>Helpers may superficially appear similar to components, but in
practice they have none of the special behavior of components such as managing
DOM. The intent of this RFC is that full class-based helpers remain very close
to the spirit of a pure function (as in the shorthand). However, despite this
intent they are a new concept for the framework.</p>
<h1><a class="header" href="#alternatives" id="alternatives">Alternatives</a></h1>
<p>A <a href="https://github.com/emberjs/rfcs/pull/52">previous RFC</a> explored creating a new class called Expressions, which would have
more closely modeled the API of components (using positional params, attrs).
After discussion and consideration it was clear that a third kind of template
API would be very challenging to document and teach well.</p>
<h1><a class="header" href="#unresolved-questions" id="unresolved-questions">Unresolved questions</a></h1>
<p>Perhaps there should be hooks in place for the lifecycle, instead of relying on
<code>init</code> and <code>destroy</code>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="0050-improved-actions.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="0055-anonymous-amd.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="0050-improved-actions.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="0055-anonymous-amd.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
