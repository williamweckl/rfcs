<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>0050-improved-actions - </title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="affix"><a href="introduction.html">Introduction</a></li><li><a href="0001-transform-attribute-meta-parameter.html">0001-transform-attribute-meta-parameter</a></li><li><a href="0003-block-params.html">0003-block-params</a></li><li><a href="0003-cli-ember-doctor.html">0003-cli-ember-doctor</a></li><li><a href="0010-engines.html">0010-engines</a></li><li><a href="0011-improved-cp-syntax.html">0011-improved-cp-syntax</a></li><li><a href="0012-help-json-output.html">0012-help-json-output</a></li><li><a href="0015-the-road-to-ember-2-0.html">0015-the-road-to-ember-2-0</a></li><li><a href="0020-sri-default.html">0020-sri-default</a></li><li><a href="0023-command-line-completion.html">0023-command-line-completion</a></li><li><a href="0024-bound-attributes.html">0024-bound-attributes</a></li><li><a href="0028-app-import-output-file.html">0028-app-import-output-file</a></li><li><a href="0029-addon-black-and-whitelist-for-apps.html">0029-addon-black-and-whitelist-for-apps</a></li><li><a href="0045-internet-explorer.html">0045-internet-explorer</a></li><li><a href="0046-cli-improved-release-process.html">0046-cli-improved-release-process</a></li><li><a href="0046-registry-reform.html">0046-registry-reform</a></li><li><a href="0050-cli-production-code-stripping.html">0050-cli-production-code-stripping</a></li><li><a href="0050-improved-actions.html" class="active">0050-improved-actions</a></li><li><a href="0053-helpers.html">0053-helpers</a></li><li><a href="0055-anonymous-amd.html">0055-anonymous-amd</a></li><li><a href="0056-improved-release-cycle.html">0056-improved-release-cycle</a></li><li><a href="0057-ember-data-reference-unification.html">0057-ember-data-reference-unification</a></li><li><a href="0058-helper-listing.html">0058-helper-listing</a></li><li><a href="0061-ember-data-background-fetch.html">0061-ember-data-background-fetch</a></li><li><a href="0064-contextual-component-lookup.html">0064-contextual-component-lookup</a></li><li><a href="0065-deprecation-warning-handlers.html">0065-deprecation-warning-handlers</a></li><li><a href="0080-serve-file-api.html">0080-serve-file-api</a></li><li><a href="0086-firefox-in-ci.html">0086-firefox-in-ci</a></li><li><a href="0090-addon-tree-caching.html">0090-addon-tree-caching</a></li><li><a href="0091-cli-addon-instrumentation-experimental-hooks.html">0091-cli-addon-instrumentation-experimental-hooks</a></li><li><a href="0091-weakmap.html">0091-weakmap</a></li><li><a href="0092-blueprint-remove-old-files.html">0092-blueprint-remove-old-files</a></li><li><a href="0095-cli-standardise-targets.html">0095-cli-standardise-targets</a></li><li><a href="0095-router-service.html">0095-router-service</a></li><li><a href="0096-enable-yarn-usage.html">0096-enable-yarn-usage</a></li><li><a href="0101-ember-data-friendly-errors.html">0101-ember-data-friendly-errors</a></li><li><a href="0105-addons-optionalDependencies.html">0105-addons-optionalDependencies</a></li><li><a href="0108-add-custom-transform.html">0108-add-custom-transform</a></li><li><a href="0110-packaging.html">0110-packaging</a></li><li><a href="0114-add-template-lint-addon.html">0114-add-template-lint-addon</a></li><li><a href="0116-qunit-dom.html">0116-qunit-dom</a></li><li><a href="0120-cli-guides.html">0120-cli-guides</a></li><li><a href="0120-route-serializers.html">0120-route-serializers</a></li><li><a href="0121-remove-ember-cli-eslint.html">0121-remove-ember-cli-eslint</a></li><li><a href="0136-contains-to-includes.html">0136-contains-to-includes</a></li><li><a href="0139-isHtmlSafe.html">0139-isHtmlSafe</a></li><li><a href="0143-module-unification.html">0143-module-unification</a></li><li><a href="0150-factory-for.html">0150-factory-for</a></li><li><a href="0176-javascript-module-api.html">0176-javascript-module-api</a></li><li><a href="0178-deprecate-ember-k.html">0178-deprecate-ember-k</a></li><li><a href="0181-deprecate-ember-data-initializers.html">0181-deprecate-ember-data-initializers</a></li><li><a href="0186-track-unique-history-location-state.html">0186-track-unique-history-location-state</a></li><li><a href="0191-deprecate-component-lifecycle-hook-args.html">0191-deprecate-component-lifecycle-hook-args</a></li><li><a href="0194-deprecate-custom-event-manager.html">0194-deprecate-custom-event-manager</a></li><li><a href="0213-custom-components.html">0213-custom-components</a></li><li><a href="0225-ember-engines-mount-params.html">0225-ember-engines-mount-params</a></li><li><a href="0226-named-blocks.html">0226-named-blocks</a></li><li><a href="0229-deprecate-testing-restricted-resolver.html">0229-deprecate-testing-restricted-resolver</a></li><li><a href="0232-simplify-qunit-testing-api.html">0232-simplify-qunit-testing-api</a></li><li><a href="0236-deprecation-ember-string.html">0236-deprecation-ember-string</a></li><li><a href="0237-deprecation-ember-map.html">0237-deprecation-ember-map</a></li><li><a href="0240-es-classes.html">0240-es-classes</a></li><li><a href="0252-browser-support-changes.html">0252-browser-support-changes</a></li><li><a href="0268-acceptance-testing-refactor.html">0268-acceptance-testing-refactor</a></li><li><a href="0272-deprecation-native-function-prototype-extensions.html">0272-deprecation-native-function-prototype-extensions</a></li><li><a href="0276-named-args.html">0276-named-args</a></li><li><a href="0278-template-only-components.html">0278-template-only-components</a></li><li><a href="0280-remove-application-wrapper.html">0280-remove-application-wrapper</a></li><li><a href="0281-es5-getters.html">0281-es5-getters</a></li><li><a href="0286-block-let-template-helper.html">0286-block-let-template-helper</a></li><li><a href="0287-promote-in-element-to-public-api.html">0287-promote-in-element-to-public-api</a></li><li><a href="0293-record-data.html">0293-record-data</a></li><li><a href="0294-optional-jquery.html">0294-optional-jquery</a></li><li><a href="0297-deprecate-ember-logger.html">0297-deprecate-ember-logger</a></li><li><a href="0300-rfc-process-update.html">0300-rfc-process-update</a></li><li><a href="0308-deprecate-property-lookup-fallback.html">0308-deprecate-property-lookup-fallback</a></li><li><a href="0311-angle-bracket-invocation.html">0311-angle-bracket-invocation</a></li><li><a href="0318-array-helper.html">0318-array-helper</a></li><li><a href="0322-deprecate-copy-copyable.html">0322-deprecate-copy-copyable</a></li><li><a href="0324-deprecate-component-isvisible.html">0324-deprecate-component-isvisible</a></li><li><a href="0326-ember-data-filter-deprecation.html">0326-ember-data-filter-deprecation</a></li><li><a href="0329-deprecated-ember-evented-in-ember-data.html">0329-deprecated-ember-evented-in-ember-data</a></li><li><a href="0331-deprecate-globals-resolver.html">0331-deprecate-globals-resolver</a></li><li><a href="0332-ember-data-record-links-and-meta.html">0332-ember-data-record-links-and-meta</a></li><li><a href="0335-deprecate-send-action.html">0335-deprecate-send-action</a></li><li><a href="0337-native-class-constructor-update.html">0337-native-class-constructor-update</a></li><li><a href="0340-deprecate-ember-merge.html">0340-deprecate-ember-merge</a></li><li><a href="0345-discord.html">0345-discord</a></li><li><a href="0364-roadmap-2018.html">0364-roadmap-2018</a></li><li><a href="0369-deprecate-computed-clobberability.html">0369-deprecate-computed-clobberability</a></li><li><a href="0370-deprecate-computed-volatile.html">0370-deprecate-computed-volatile</a></li><li><a href="0372-ember-data-model-factory-for.html">0372-ember-data-model-factory-for</a></li><li><a href="0373-Element-Modifier-Managers.html">0373-Element-Modifier-Managers</a></li><li><a href="0375-deprecate-computed-property-modifier.html">0375-deprecate-computed-property-modifier</a></li><li><a href="0386-remove-jquery.html">0386-remove-jquery</a></li><li><a href="0389-dynamic-tag-names.html">0389-dynamic-tag-names</a></li><li><a href="0391-router-helpers.html">0391-router-helpers</a></li><li><a href="0392-deprecate-component-manager-string-lookup.html">0392-deprecate-component-manager-string-lookup</a></li><li><a href="0395-ember-data-packages.html">0395-ember-data-packages</a></li><li><a href="0398-RouteInfo-Metadata.html">0398-RouteInfo-Metadata</a></li><li><a href="0403-ember-data-identifiers.html">0403-ember-data-identifiers</a></li><li><a href="0408-decorators.html">0408-decorators</a></li><li><a href="0410-tracked-properties.html">0410-tracked-properties</a></li><li><a href="0415-render-element-modifiers.html">0415-render-element-modifiers</a></li><li><a href="0416-glimmer-components.html">0416-glimmer-components</a></li><li><a href="0418-deprecate-route-render-methods.html">0418-deprecate-route-render-methods</a></li><li><a href="0421-deprecate-application-controller-props.html">0421-deprecate-application-controller-props</a></li><li><a href="0425-website-redesign.html">0425-website-redesign</a></li><li><a href="0431-guides-restructure.html">0431-guides-restructure</a></li><li><a href="0432-contextual-helpers.html">0432-contextual-helpers</a></li><li><a href="0435-modifier-splattributes.html">0435-modifier-splattributes</a></li><li><a href="0440-decorator-support.html">0440-decorator-support</a></li><li><a href="0445-deprecate-with.html">0445-deprecate-with</a></li><li><a href="0446-contribution-guides.html">0446-contribution-guides</a></li><li><a href="0449-deprecate-partials.html">0449-deprecate-partials</a></li><li><a href="0451-injection-parameter-normalization.html">0451-injection-parameter-normalization</a></li><li><a href="0452-ember-data-medium-term-plan.html">0452-ember-data-medium-term-plan</a></li><li><a href="0457-nested-lookups.html">0457-nested-lookups</a></li><li><a href="0459-angle-bracket-built-in-components.html">0459-angle-bracket-built-in-components</a></li><li><a href="0460-yieldable-named-blocks.html">0460-yieldable-named-blocks</a></li><li><a href="0461-ember-data-singleton-record-data.html">0461-ember-data-singleton-record-data</a></li><li><a href="0463-record-data-state.html">0463-record-data-state</a></li><li><a href="0465-record-data-errors.html">0465-record-data-errors</a></li><li><a href="0466-request-state-service.html">0466-request-state-service</a></li><li><a href="0468-classic-decorator.html">0468-classic-decorator</a></li><li><a href="0470-fn-helper.html">0470-fn-helper</a></li><li><a href="0471-on-modifier.html">0471-on-modifier</a></li><li><a href="0478-tracked-properties-updates.html">0478-tracked-properties-updates</a></li><li><a href="0481-component-templates-co-location.html">0481-component-templates-co-location</a></li><li><a href="0486-deprecate-mouseenter.html">0486-deprecate-mouseenter</a></li><li><a href="0487-custom-model-classes.html">0487-custom-model-classes</a></li><li><a href="0491-deprecate-disconnect-outlet.html">0491-deprecate-disconnect-outlet</a></li><li><a href="0494-async-observers.html">0494-async-observers</a></li><li><a href="0521-find-by-identifier.html">0521-find-by-identifier</a></li><li><a href="0522-default-serializers-and-adapters.html">0522-default-serializers-and-adapters</a></li><li><a href="0523-model-argument-for-route-templates.html">0523-model-argument-for-route-templates</a></li><li><a href="0554-deprecate-getwithdefault.html">0554-deprecate-getwithdefault</a></li><li><a href="0558-edition-detection.html">0558-edition-detection</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title"></h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <ul>
<li>Start Date: 2014-05-06</li>
<li>RFC PR: https://github.com/emberjs/rfcs/pull/50</li>
<li>Ember Issue: (leave this empty)</li>
</ul>
<h1><a class="header" href="#summary" id="summary">Summary</a></h1>
<p>The <code>{{action</code> helper should be improved to allow for the creation of
closed over functions that can be passed between components and passed
the action handlers.</p>
<p>See <a href="http://emberjs.jsbin.com/rwjblue/466/edit?html,js,output">this example JSBin from @rwjblue</a>
for a demonstration of some of these ideas.</p>
<h1><a class="header" href="#motivation" id="motivation">Motivation</a></h1>
<p>Block params allow data to be passed from one component to a downstream
component, however there is currently no way to pass a callback to a downstream
component.</p>
<h1><a class="header" href="#detailed-design" id="detailed-design">Detailed design</a></h1>
<p>First, the existing uses of <code>{{action</code> will be maintained. An action can be attached to an
element by using the helper in element space:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{! submit action will hit immediate parent }}
&lt;button {{action &quot;submit&quot;}}&gt;Save&lt;/button&gt;
</code></pre>
<p>An action can be passed to a component as a string:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{my-button on-click=&quot;submit&quot;}}
</code></pre>
<pre><code class="language-js">// app/components/my-button/component.js
export default Ember.Component.extend({
  click: function(){
    this.sendAction('on-click');
  }
});
</code></pre>
<p>Or a default action can be passed:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{my-button action=&quot;submit&quot;}}
</code></pre>
<pre><code class="language-js">// app/components/my-button/component.js
export default Ember.Component.extend({
  click: function(){
    this.sendAction();
  }
});
</code></pre>
<p>In all these cases, <code>submit</code> is called on the parent context relative to the scope <code>action</code> is
attached in. The value <code>&quot;submit&quot;</code> is attached to the component in the last two as
<code>this.attrs.on-click</code> or <code>this.attrs.action</code>, although it is not directly used.</p>
<h3><a class="header" href="#creating-closure-actions" id="creating-closure-actions">Creating closure actions</a></h3>
<p>Closure actions are created in a template and may be used in all places a string
action name can be used. For example, this current functionality:</p>
<pre><code class="language-hbs">&lt;button {{action &quot;submit&quot; on=&quot;click&quot;}}&gt;Save&lt;/button&gt;
</code></pre>
<p>Would be written using a closure action as:</p>
<pre><code class="language-hbs">&lt;button {{action (action &quot;submit&quot;) on=&quot;click&quot;}}&gt;Save&lt;/button&gt;
</code></pre>
<p>The functionality is exactly the same as the string-based action example.
How does that happen?</p>
<ul>
<li><code>(action &quot;submit&quot;)</code> reads the <code>submit</code> function off the current scope's
<code>actions.submit</code> property.</li>
<li>It then creates a closure to call that function.</li>
<li><code>{{action</code> receives that function as a param. It registers a listener (in
this case on click) and when fired calls the closure function.</li>
</ul>
<p>Consider usage on the calling side. With the current string-based actions:</p>
<pre><code class="language-hbs">{{my-component action=&quot;submit&quot;}}
</code></pre>
<pre><code class="language-js">export default Ember.Component.extend({
  click: function(){
    this.sendAction(); // submit action, legacy
    // this.attrs.action is a string
    this.attrs.action; // =&gt; &quot;submit&quot;
  }
});
</code></pre>
<p>With closure actions, the action is available to call directly. The <code>(action</code> helper
wraps the action in the current context and returns a function:</p>
<pre><code class="language-hbs">{{my-component action=(action &quot;submit&quot;)}}
</code></pre>
<pre><code class="language-js">export default Ember.Component.extend({
  click: function(){
    this.sendAction(); // submit action, legacy
    // this.attrs.action is a function
    this.attrs.action(); // submit action, new style
  }
});
</code></pre>
<p>A more complete example follows, with a controller for context:</p>
<pre><code class="language-js">// app/index/controller.js
export default Ember.Controller.extend({
  actions: {
    submit: function(){
      // some submission task
    }
  }
});
</code></pre>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{my-button save=(action 'submit')}}
</code></pre>
<pre><code class="language-js">// app/components/my-button/component.js
export default Ember.Component.extend({
  click: function(){
    this.attrs.save();
    // for backwards compat, you may also this.sendAction('save');
  }
});
</code></pre>
<h3><a class="header" href="#hole-punching-with-a-closure-based-action" id="hole-punching-with-a-closure-based-action">Hole punching with a closure-based action</a></h3>
<p>The current system of action bubbling falls down quickly when you want to pass a message through multiple
levels of components. A closure based action system helps address this.</p>
<p>Instead of relying on bubbling, a closure action wraps an action from the current context's
<code>actions</code> hash in a function that will call it on that context. For example:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{my-form submit=(action 'submit')}}
</code></pre>
<pre><code class="language-hbs">{{! app/components/my-form/template.hbs }}
{{my-button on-click=attrs.submit}}
</code></pre>
<pre><code class="language-hbs">{{! app/components/my-button/template.hbs }}
&lt;button&gt;&lt;/button&gt;
</code></pre>
<pre><code class="language-js">// app/components/my-button/component.js
export default Ember.Component.extend({
  click: function(){
    this.attrs['on-click']();
    // for backwards compat, you may also this.sendAction();
  }
});
</code></pre>
<p>A closure action can also be called by an action handler:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{my-form submit=(action 'submit')}}
</code></pre>
<pre><code class="language-hbs">{{! app/components/my-form/template.hbs }}
{{my-button on-click=submit}}
</code></pre>
<pre><code class="language-hbs">{{! app/components/my-button/template.hbs }}
&lt;button {{action on-click}}&gt;&lt;/button&gt;
</code></pre>
<p>Lastly, closure actions allow for yielding an action to a block. For example:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{my-form save=(action 'submit') as |submit reset|}}
  &lt;button {{action submit}}&gt;Save&lt;/button&gt;
  {{! ^ goes to my-form's save attr property, which
        is the submit action on the outer scope }}
  &lt;button {{action reset}}&gt;Reset&lt;/button&gt;
  {{! ^ goes to my-form }}
  &lt;button {{action &quot;cancel&quot;}}&gt;Cancel&lt;/button&gt;
  {{! ^ goes to outer scope }}
{{/my-form}}
</code></pre>
<pre><code class="language-hbs">{{! app/components/my-form/template.hbs }}
{{yield attrs.save (action 'reset')}}
</code></pre>
<pre><code class="language-js">// app/components/my-form/component.js
export default Ember.Component.extend({
  actions: {
    reset: function(){
      // rollback
    }
  }
});
</code></pre>
<h3><a class="header" href="#currying-arguments-with-a-closure-based-action" id="currying-arguments-with-a-closure-based-action">Currying arguments with a closure-based action</a></h3>
<p>With string-based actions, an argument can be passed to the called function. For
example:</p>
<pre><code class="language-hbs">&lt;button {{action &quot;save&quot; model}}&gt;&lt;/button&gt;
</code></pre>
<pre><code class="language-js">export default Ember.Component.extend({
  actions: {
    save: function(model) {
      model.save();
    }
  }
});
</code></pre>
<p>Closure actions allow for another opportunity to curry arguments. Arguments
set by an element action helper simply add to the end of the arguments list:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{my-component save=(action &quot;save&quot; model)}}
</code></pre>
<pre><code class="language-hbs">{{! app/components/my-component/template.hbs }}
&lt;button {{action attrs.save prefs}}&gt;&lt;/button&gt;
</code></pre>
<pre><code class="language-js">// app/index/controller.js
export default Ember.Controller.extend({
  actions: {
    save: function(model, prefs) {
      model.set('prefs', prefs);
      model.save();
    }
  }
});
</code></pre>
<p>Multiple arguments can be curried or set at any level. If an action is called ala
<code>this.attrs.save(additionalPrefs)</code>, that final argument is added
to the end of the arguments list.</p>
<h3><a class="header" href="#re-targeting-the-scope-of-a-closure-action" id="re-targeting-the-scope-of-a-closure-action">Re-targeting the scope of a closure action</a></h3>
<p>The <code>target</code> option may be provided to specify what scope the closure is called
with. For example:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
&lt;my-component on-click={{action &quot;save&quot; model target=someComponentInstance}}&gt;&lt;/my-component&gt;
</code></pre>
<p>Much like with the <code>{{action</code> helper, passing both a
target and a bound argument will throw.</p>
<p>The default target for a closure is always the current scope.</p>
<ul>
<li>When routable components land, the current component will be the default target.</li>
<li>If a controller is the current scope, that controller will also be a default target.</li>
<li>A route will <em>never</em> be a closure action target. String actions will continue
to have their current behavior of bubbling to the route.</li>
</ul>
<p>A later proposal will determine how actions on a route are passed to a routable
component.</p>
<h3><a class="header" href="#return-values-of-a-closure-action" id="return-values-of-a-closure-action">Return values of a closure action</a></h3>
<p>Closure actions return the returned value of their called function. For example:</p>
<pre><code class="language-js">// app/index/controller.js
export default Ember.Controller.extend({
  actions: {
    submit: function(){
      return 'great success';
    }
  }
});
</code></pre>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
{{my-button save=(action 'submit')}}
</code></pre>
<pre><code class="language-js">// app/components/my-button/component.js
export default Ember.Component.extend({
  click: function(){
    var result = this.attrs.save();
    // for backwards compat, you may also this.sendAction('save') but
    // in that case you do not have access to the return value.
    result; // =&gt; 'great success'
  }
});
</code></pre>
<h3><a class="header" href="#actionable-object-with-invoke" id="actionable-object-with-invoke">Actionable object with INVOKE</a></h3>
<p><code>{{mut</code> is a new helper in Ember.js. It is not yet widely used in Ember apps, but its
interaction with the action helper is important to align early on.</p>
<p>Mut objects represent a modifiable value. For example with tag-based components:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
&lt;my-form name={{mut model.name}}&gt;&lt;/my-component&gt;
</code></pre>
<p>This will cause a mutable property to be added to <code>attrs</code>. To update the name,
<code>this.attrs.name.update(newName)</code> can be called. The value can be read (in
JavaScript) as <code>this.attrs.name.value</code>.</p>
<p>Often, a mutable value will be set as the result of an action. Mutable values
can be called actionable. For example:</p>
<pre><code class="language-hbs">{{! app/index/template.hbs }}
&lt;my-form submit={{action (mut model.name)}}&gt;&lt;/my-component&gt;
</code></pre>
<pre><code class="language-js">// app/components/my-form/component.js
export default Ember.Component.extend({
  click() {
    const value = this.get('newValue');
    this.attrs.submit(value);
  }
});
</code></pre>
<p>What is happening here?</p>
<ul>
<li><code>(mut model.name)</code> creates a mutable object for the <code>model.name</code> value.</li>
<li><code>{{action (mut model.name)}}</code> tests the passed object for a property with the
key <code>INVOKE</code> (an internal symbol). This value is a function that updates the mutable value.</li>
<li>Action wraps the calling of the <code>INVOKE</code> property in a function like any
other action, and passes it to the <code>attrs</code>.</li>
</ul>
<p>Thus, when the action is called the argument is passed to <code>INVOKE</code> which uses
it to update the mutable value. This is a simple way to enable the &quot;actions up&quot;
part of component-driven app architecture without ceremony around changing state.</p>
<h3><a class="header" href="#plucking-a-property-from-the-first-argument-with-value" id="plucking-a-property-from-the-first-argument-with-value">Plucking a property from the first argument with value</a></h3>
<p>A component (or when Ember supports this better, an element) may emit an event
object and pass it to an action. In this case the value will need to be read off
the event before it can be passed to the action function. For example:</p>
<pre><code class="language-hbs">{{input input=(action 'setName')}}
</code></pre>
<pre><code class="language-js">export default Ember.Component.extend({
  actions: {
    setName(event) {
      this.get('model').set('name', event.target.value);
    }
  }
});
</code></pre>
<p>The action serves only to read the value off of the event. Here the <code>value</code>
option can be used as sugar to accomplish the same task:</p>
<pre><code class="language-hbs">{{input input=(action (mut model.name) value=&quot;target.value&quot;)}}
</code></pre>
<p>The <code>value</code> path is read off of whatever the first argument to the actions is.</p>
<ul>
<li><code>(mut model.name)</code> becomes a function, our action</li>
<li>When the <code>input</code> event fires, the function is called with the event as the
first argument.</li>
<li>The first argument is re-written to the value of <code>event.target.value</code></li>
<li>The function wrapping the <code>mut</code> is set</li>
<li>The <code>mut</code> is updated.</li>
</ul>
<p>This option is designed to align with future plans for <code>on-some-event</code> handlers
for html elements.</p>
<h1><a class="header" href="#drawbacks" id="drawbacks">Drawbacks</a></h1>
<p>Currently <code>{{action</code> is only used in an element space:</p>
<pre><code class="language-hbs">&lt;button {{action &quot;booyah&quot;}}&gt;Fire&lt;/button&gt;
</code></pre>
<p>The closure usage is a new, perhaps <code>action</code> is not the right word. However the two
behaviors are pretty similar in their conceptual behavior.</p>
<ul>
<li><code>{{action</code> in element space attaches an event listener that fires a bubbling
action.</li>
<li><code>(action</code> closes over an action from the current scope so it can be attached
via <code>{{action</code> or passed around and called later.</li>
</ul>
<p>This confusion should go away as we move to an <code>on-click</code> event listener pattern,
ala <code>&lt;button on-click={{someClosureAction}}&gt;</code>.</p>
<p>Additionally, there may be developers who still have <code>{{action someActionName}}</code> instead
of the quoted version. This is long deprecated, but these apps may see some
unexpected behavior.</p>
<p>Also additionally, some emergent behaviors exist that may not be desired as real APIs. For example,
an action being a function means it can be passed directly to event handlers:</p>
<pre><code class="language-hbs">{{my-component mouseEnter=(action 'didEnter')}}
</code></pre>
<p>The actual API we plan for 2.0 (ideally) is:</p>
<pre><code class="language-hbs">{{my-component on-mouse-enter=(action 'didEnter')}}
</code></pre>
<p>These behaviors should not be documented, and we should make clear that they rely on behavior that
will be deprecated. A mitigating move is to <em>not</em> proxy actions through to
<code>get</code> on a component, and only allow them to be accessed on <code>attrs</code>.</p>
<p>Lastly, default actions may look a bit confusing:</p>
<pre><code class="language-hbs">{{my-button action=(action 'action')}}
{{! ^ this is valid }}
</code></pre>
<p>But the quoted string syntax is not being removed.</p>
<h1><a class="header" href="#alternatives" id="alternatives">Alternatives</a></h1>
<p>There is maybe a thing called <code>ref</code> that solves this same problem. There has also
been discussion of accessing properties on <code>outlet</code> across all child components
and their layouts, which would allow easy targetting of the top level component.</p>
<h1><a class="header" href="#unresolved-questions" id="unresolved-questions">Unresolved questions</a></h1>
<p>Interaction with <code>ref</code> or <code>outlet.</code> if any..</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="0050-cli-production-code-stripping.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="0053-helpers.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="0050-cli-production-code-stripping.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="0053-helpers.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
