<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>0432-contextual-helpers - </title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="affix"><a href="introduction.html">Introduction</a></li><li><a href="0001-transform-attribute-meta-parameter.html">0001-transform-attribute-meta-parameter</a></li><li><a href="0003-block-params.html">0003-block-params</a></li><li><a href="0003-cli-ember-doctor.html">0003-cli-ember-doctor</a></li><li><a href="0010-engines.html">0010-engines</a></li><li><a href="0011-improved-cp-syntax.html">0011-improved-cp-syntax</a></li><li><a href="0012-help-json-output.html">0012-help-json-output</a></li><li><a href="0015-the-road-to-ember-2-0.html">0015-the-road-to-ember-2-0</a></li><li><a href="0020-sri-default.html">0020-sri-default</a></li><li><a href="0023-command-line-completion.html">0023-command-line-completion</a></li><li><a href="0024-bound-attributes.html">0024-bound-attributes</a></li><li><a href="0028-app-import-output-file.html">0028-app-import-output-file</a></li><li><a href="0029-addon-black-and-whitelist-for-apps.html">0029-addon-black-and-whitelist-for-apps</a></li><li><a href="0045-internet-explorer.html">0045-internet-explorer</a></li><li><a href="0046-cli-improved-release-process.html">0046-cli-improved-release-process</a></li><li><a href="0046-registry-reform.html">0046-registry-reform</a></li><li><a href="0050-cli-production-code-stripping.html">0050-cli-production-code-stripping</a></li><li><a href="0050-improved-actions.html">0050-improved-actions</a></li><li><a href="0053-helpers.html">0053-helpers</a></li><li><a href="0055-anonymous-amd.html">0055-anonymous-amd</a></li><li><a href="0056-improved-release-cycle.html">0056-improved-release-cycle</a></li><li><a href="0057-ember-data-reference-unification.html">0057-ember-data-reference-unification</a></li><li><a href="0058-helper-listing.html">0058-helper-listing</a></li><li><a href="0061-ember-data-background-fetch.html">0061-ember-data-background-fetch</a></li><li><a href="0064-contextual-component-lookup.html">0064-contextual-component-lookup</a></li><li><a href="0065-deprecation-warning-handlers.html">0065-deprecation-warning-handlers</a></li><li><a href="0080-serve-file-api.html">0080-serve-file-api</a></li><li><a href="0086-firefox-in-ci.html">0086-firefox-in-ci</a></li><li><a href="0090-addon-tree-caching.html">0090-addon-tree-caching</a></li><li><a href="0091-cli-addon-instrumentation-experimental-hooks.html">0091-cli-addon-instrumentation-experimental-hooks</a></li><li><a href="0091-weakmap.html">0091-weakmap</a></li><li><a href="0092-blueprint-remove-old-files.html">0092-blueprint-remove-old-files</a></li><li><a href="0095-cli-standardise-targets.html">0095-cli-standardise-targets</a></li><li><a href="0095-router-service.html">0095-router-service</a></li><li><a href="0096-enable-yarn-usage.html">0096-enable-yarn-usage</a></li><li><a href="0101-ember-data-friendly-errors.html">0101-ember-data-friendly-errors</a></li><li><a href="0105-addons-optionalDependencies.html">0105-addons-optionalDependencies</a></li><li><a href="0108-add-custom-transform.html">0108-add-custom-transform</a></li><li><a href="0110-packaging.html">0110-packaging</a></li><li><a href="0114-add-template-lint-addon.html">0114-add-template-lint-addon</a></li><li><a href="0116-qunit-dom.html">0116-qunit-dom</a></li><li><a href="0120-cli-guides.html">0120-cli-guides</a></li><li><a href="0120-route-serializers.html">0120-route-serializers</a></li><li><a href="0121-remove-ember-cli-eslint.html">0121-remove-ember-cli-eslint</a></li><li><a href="0136-contains-to-includes.html">0136-contains-to-includes</a></li><li><a href="0139-isHtmlSafe.html">0139-isHtmlSafe</a></li><li><a href="0143-module-unification.html">0143-module-unification</a></li><li><a href="0150-factory-for.html">0150-factory-for</a></li><li><a href="0176-javascript-module-api.html">0176-javascript-module-api</a></li><li><a href="0178-deprecate-ember-k.html">0178-deprecate-ember-k</a></li><li><a href="0181-deprecate-ember-data-initializers.html">0181-deprecate-ember-data-initializers</a></li><li><a href="0186-track-unique-history-location-state.html">0186-track-unique-history-location-state</a></li><li><a href="0191-deprecate-component-lifecycle-hook-args.html">0191-deprecate-component-lifecycle-hook-args</a></li><li><a href="0194-deprecate-custom-event-manager.html">0194-deprecate-custom-event-manager</a></li><li><a href="0213-custom-components.html">0213-custom-components</a></li><li><a href="0225-ember-engines-mount-params.html">0225-ember-engines-mount-params</a></li><li><a href="0226-named-blocks.html">0226-named-blocks</a></li><li><a href="0229-deprecate-testing-restricted-resolver.html">0229-deprecate-testing-restricted-resolver</a></li><li><a href="0232-simplify-qunit-testing-api.html">0232-simplify-qunit-testing-api</a></li><li><a href="0236-deprecation-ember-string.html">0236-deprecation-ember-string</a></li><li><a href="0237-deprecation-ember-map.html">0237-deprecation-ember-map</a></li><li><a href="0240-es-classes.html">0240-es-classes</a></li><li><a href="0252-browser-support-changes.html">0252-browser-support-changes</a></li><li><a href="0268-acceptance-testing-refactor.html">0268-acceptance-testing-refactor</a></li><li><a href="0272-deprecation-native-function-prototype-extensions.html">0272-deprecation-native-function-prototype-extensions</a></li><li><a href="0276-named-args.html">0276-named-args</a></li><li><a href="0278-template-only-components.html">0278-template-only-components</a></li><li><a href="0280-remove-application-wrapper.html">0280-remove-application-wrapper</a></li><li><a href="0281-es5-getters.html">0281-es5-getters</a></li><li><a href="0286-block-let-template-helper.html">0286-block-let-template-helper</a></li><li><a href="0287-promote-in-element-to-public-api.html">0287-promote-in-element-to-public-api</a></li><li><a href="0293-record-data.html">0293-record-data</a></li><li><a href="0294-optional-jquery.html">0294-optional-jquery</a></li><li><a href="0297-deprecate-ember-logger.html">0297-deprecate-ember-logger</a></li><li><a href="0300-rfc-process-update.html">0300-rfc-process-update</a></li><li><a href="0308-deprecate-property-lookup-fallback.html">0308-deprecate-property-lookup-fallback</a></li><li><a href="0311-angle-bracket-invocation.html">0311-angle-bracket-invocation</a></li><li><a href="0318-array-helper.html">0318-array-helper</a></li><li><a href="0322-deprecate-copy-copyable.html">0322-deprecate-copy-copyable</a></li><li><a href="0324-deprecate-component-isvisible.html">0324-deprecate-component-isvisible</a></li><li><a href="0326-ember-data-filter-deprecation.html">0326-ember-data-filter-deprecation</a></li><li><a href="0329-deprecated-ember-evented-in-ember-data.html">0329-deprecated-ember-evented-in-ember-data</a></li><li><a href="0331-deprecate-globals-resolver.html">0331-deprecate-globals-resolver</a></li><li><a href="0332-ember-data-record-links-and-meta.html">0332-ember-data-record-links-and-meta</a></li><li><a href="0335-deprecate-send-action.html">0335-deprecate-send-action</a></li><li><a href="0337-native-class-constructor-update.html">0337-native-class-constructor-update</a></li><li><a href="0340-deprecate-ember-merge.html">0340-deprecate-ember-merge</a></li><li><a href="0345-discord.html">0345-discord</a></li><li><a href="0364-roadmap-2018.html">0364-roadmap-2018</a></li><li><a href="0369-deprecate-computed-clobberability.html">0369-deprecate-computed-clobberability</a></li><li><a href="0370-deprecate-computed-volatile.html">0370-deprecate-computed-volatile</a></li><li><a href="0372-ember-data-model-factory-for.html">0372-ember-data-model-factory-for</a></li><li><a href="0373-Element-Modifier-Managers.html">0373-Element-Modifier-Managers</a></li><li><a href="0375-deprecate-computed-property-modifier.html">0375-deprecate-computed-property-modifier</a></li><li><a href="0386-remove-jquery.html">0386-remove-jquery</a></li><li><a href="0389-dynamic-tag-names.html">0389-dynamic-tag-names</a></li><li><a href="0391-router-helpers.html">0391-router-helpers</a></li><li><a href="0392-deprecate-component-manager-string-lookup.html">0392-deprecate-component-manager-string-lookup</a></li><li><a href="0395-ember-data-packages.html">0395-ember-data-packages</a></li><li><a href="0398-RouteInfo-Metadata.html">0398-RouteInfo-Metadata</a></li><li><a href="0403-ember-data-identifiers.html">0403-ember-data-identifiers</a></li><li><a href="0408-decorators.html">0408-decorators</a></li><li><a href="0410-tracked-properties.html">0410-tracked-properties</a></li><li><a href="0415-render-element-modifiers.html">0415-render-element-modifiers</a></li><li><a href="0416-glimmer-components.html">0416-glimmer-components</a></li><li><a href="0418-deprecate-route-render-methods.html">0418-deprecate-route-render-methods</a></li><li><a href="0421-deprecate-application-controller-props.html">0421-deprecate-application-controller-props</a></li><li><a href="0425-website-redesign.html">0425-website-redesign</a></li><li><a href="0431-guides-restructure.html">0431-guides-restructure</a></li><li><a href="0432-contextual-helpers.html" class="active">0432-contextual-helpers</a></li><li><a href="0435-modifier-splattributes.html">0435-modifier-splattributes</a></li><li><a href="0440-decorator-support.html">0440-decorator-support</a></li><li><a href="0445-deprecate-with.html">0445-deprecate-with</a></li><li><a href="0446-contribution-guides.html">0446-contribution-guides</a></li><li><a href="0449-deprecate-partials.html">0449-deprecate-partials</a></li><li><a href="0451-injection-parameter-normalization.html">0451-injection-parameter-normalization</a></li><li><a href="0452-ember-data-medium-term-plan.html">0452-ember-data-medium-term-plan</a></li><li><a href="0457-nested-lookups.html">0457-nested-lookups</a></li><li><a href="0459-angle-bracket-built-in-components.html">0459-angle-bracket-built-in-components</a></li><li><a href="0460-yieldable-named-blocks.html">0460-yieldable-named-blocks</a></li><li><a href="0461-ember-data-singleton-record-data.html">0461-ember-data-singleton-record-data</a></li><li><a href="0463-record-data-state.html">0463-record-data-state</a></li><li><a href="0465-record-data-errors.html">0465-record-data-errors</a></li><li><a href="0466-request-state-service.html">0466-request-state-service</a></li><li><a href="0468-classic-decorator.html">0468-classic-decorator</a></li><li><a href="0470-fn-helper.html">0470-fn-helper</a></li><li><a href="0471-on-modifier.html">0471-on-modifier</a></li><li><a href="0478-tracked-properties-updates.html">0478-tracked-properties-updates</a></li><li><a href="0481-component-templates-co-location.html">0481-component-templates-co-location</a></li><li><a href="0486-deprecate-mouseenter.html">0486-deprecate-mouseenter</a></li><li><a href="0487-custom-model-classes.html">0487-custom-model-classes</a></li><li><a href="0491-deprecate-disconnect-outlet.html">0491-deprecate-disconnect-outlet</a></li><li><a href="0494-async-observers.html">0494-async-observers</a></li><li><a href="0521-find-by-identifier.html">0521-find-by-identifier</a></li><li><a href="0522-default-serializers-and-adapters.html">0522-default-serializers-and-adapters</a></li><li><a href="0523-model-argument-for-route-templates.html">0523-model-argument-for-route-templates</a></li><li><a href="0554-deprecate-getwithdefault.html">0554-deprecate-getwithdefault</a></li><li><a href="0558-edition-detection.html">0558-edition-detection</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title"></h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <ul>
<li>Start Date: 2018-12-17</li>
<li>Relevant Team(s): Ember.js</li>
<li>RFC PR: https://github.com/emberjs/rfcs/pull/432</li>
<li>Tracking: https://github.com/emberjs/rfc-tracking/issues/6</li>
</ul>
<h1><a class="header" href="#contextual-helpers-and-modifiers-aka-first-class-helpersmodifiers" id="contextual-helpers-and-modifiers-aka-first-class-helpersmodifiers">Contextual Helpers and Modifiers (a.k.a. &quot;first-class helpers/modifiers&quot;)</a></h1>
<h2><a class="header" href="#summary" id="summary">Summary</a></h2>
<p>We propose to extend the semantics of Handlebars helpers and modifiers such
that they can be passed around as first-class values in templates.</p>
<p>For example:</p>
<pre><code class="language-hbs">{{join-words &quot;foo&quot; &quot;bar&quot; &quot;baz&quot; separator=&quot;,&quot;}}

{{!-- ...is functionally equivalent to... --}}

{{#let (helper &quot;join-words&quot; separator=&quot;,&quot;) as |join|}}
  {{#let (helper join &quot;foo&quot;) as |foo|}}
    {{#let (helper foo &quot;bar&quot;) as |foo-bar|}}
      {{foo-bar &quot;baz&quot;}}
    {{/let}}
  {{/let}}
{{/let}}
</code></pre>
<pre><code class="language-hbs">&lt;Submit {{on
  click=(action &quot;submit&quot;)
  mouseenter=(action &quot;highlight&quot;)
  mouseleave=(action &quot;unhighlight&quot;)
}} /&gt;

{{!-- ...is functionally equivalent to... --}}

{{#let (modifier &quot;on&quot;) as |on|}}
  {{#let (modifier on click=(action &quot;submit&quot;)) as |on-click|}}
    {{#let (modifier on-click mouseenter=(action &quot;highlight&quot;)) as |on-click-enter|}}
      {{#let (modifier on-click-enter mouseleave=(action &quot;unhighlight&quot;)) as |on-click-enter-leave|}}
        &lt;Submit {{on-click-enter-leave}} /&gt;
      {{/let}}
    {{/let}}
  {{/let}}
{{/let}}
</code></pre>
<h2><a class="header" href="#motivation" id="motivation">Motivation</a></h2>
<p><a href="https://github.com/emberjs/rfcs/pull/64">RFC #64</a> introduced a feature known
as &quot;contextual components&quot;, which allowed components to be passed around as
first-class values. While this is a somewhat advanced feature, it allowed addon
authors to encapsulate internal state and logic, which in turns, allowed them
to create easy-to-use and easy-to-understand DSL-like APIs that could benefit
users of all level.</p>
<p>For example, the original RFC used form controls as a motivating example.
Without contextual components, an addon that provides form-building components
might have to expose an API like this:</p>
<pre><code class="language-hbs">&lt;SuperForm @model={{this.post}} as |f|&gt;
  &lt;SuperInput @model={{this.post}} @name=&quot;title&quot; /&gt;
  &lt;SuperTextarea @model={{this.post}} @name=&quot;body&quot; /&gt;
  &lt;SuperSubmit @form={{f}} /&gt;
&lt;/SuperForm&gt;
</code></pre>
<p>As you can see, this is far from ideal for several reasons. First, to avoid
collision, the addon author had to prefix all the components. Second, the
<code>@model</code> argument has to be passed to all the controls that needs it. Finally,
in cases where the components need to communicate with each other (the form and
the submit button in the example), they would have to expose some internal state
(the <code>|f|</code> block param) that the user would have to manually thread through. Not
only does this make the API very verbose, it also breaks encapsulation.</p>
<p>Instead, the contextual components feature allows the addon author to expose an
API like this:</p>
<pre><code class="language-hbs">&lt;SuperForm @model={{this.post}} as |f|&gt;
  &lt;f.Input @name=&quot;title&quot; /&gt;
  &lt;f.Textarea @name=&quot;body&quot; /&gt;
  &lt;f.Submit /&gt;
&lt;/SuperForm&gt;
</code></pre>
<p>Behind the scene, the <code>&lt;SuperForm&gt;</code> component's template would look something
like this:</p>
<pre><code class="language-hbs">&lt;form ...&gt;
  {{yield (hash
    Input=(component &quot;super-input&quot; form=this model=this.model)
    Textarea=(component &quot;super-textarea&quot; form=this model=this.model)
    Submit=(component &quot;super-submit&quot; form=this model=this.model)
  )}}
&lt;/form&gt;
</code></pre>
<p>Here, the <code>component</code> helper looked up the components by name (first argument)
and packaged up (&quot;curried&quot;) any additional arguments (<code>form=this</code>) into an
internal object (known as a &quot;component definition&quot; in the Glimmer VM). This
object can then be passed around like any other values and invoked at a later
time.</p>
<p>(Typically, a number of them are passed to the <code>hash</code> helper to &quot;bundle&quot; them
into a single object, but this is not required.)</p>
<p>While this is indeed a pretty advanced feature, the users of <code>SuperForm</code> do not
need to be aware of these implementation details in order to use the addon.
This had proved to be a very useful and powerful feature and enabled a number
of popular addons, such as
<a href="https://ember-learn.github.io/ember-cli-addon-docs/">ember-cli-addon-docs</a>,
<a href="https://www.ember-bootstrap.com">ember-bootstrap</a>,
<a href="https://opensource.addepar.com/ember-table/">ember-table</a>,
<a href="https://miguelcobain.github.io/ember-paper/">ember-paper</a>,
<a href="https://ember-power-calendar.com">ember-power-calendar</a>,
<a href="http://khorus.github.io/ember-accordion/">ember-accordion</a>,
<a href="https://emberx-select.netlify.com/">emberx-select</a>,
<a href="https://offirgolan.github.io/ember-light-table/">ember-light-table</a>.</p>
<p>The original RFC left an important question unanswered – <a href="https://github.com/emberjs/rfcs/blob/master/text/0064-contextual-component-lookup.md#unresolved-questions">should this feature
be available for helpers, too?</a></p>
<p>In this RFC, we argue – yes, this feature will be just as useful for helpers as
well as modifiers.</p>
<p>For example, the <code>SuperForm</code> addon API can be expanded to include some extra
helpers and modifiers, like so:</p>
<pre><code class="language-hbs">&lt;SuperForm @model={{this.post}} as |f|&gt;
  &lt;f.Input @name=&quot;title&quot; /&gt;

  {{!-- f.is-valid and f.error-for are contextual helpers --}}
  {{#unless (f.is-valid &quot;title&quot;)}}
    &lt;div class=&quot;error&quot;&gt;This field {{f.error-for &quot;title&quot;}}&lt;/div&gt;
  {{/unless}}

  {{!-- f.auto-resize is a contextual modifier --}}
  &lt;f.Textarea @name=&quot;body&quot; {{f.auto-resize maxHeight=&quot;500&quot;}} /&gt;

  &lt;f.Submit /&gt;
&lt;/SuperForm&gt;
</code></pre>
<p>For reference, the <code>&lt;SuperForm&gt;</code> component's template would look something like
this:</p>
<pre><code class="language-hbs">&lt;form ...&gt;
  {{yield (hash
    is-valid=(helper &quot;super-is-valid&quot; form=this model=this.model)
    error-for=(helper &quot;super-error-for&quot; form=this model=this.model)
    auto-resize=(modifier &quot;super-auto-resize&quot;)
    ...
  )}}
&lt;/form&gt;
</code></pre>
<p>This RFC proposes a complete design for enabling this capability.</p>
<h2><a class="header" href="#detailed-design" id="detailed-design">Detailed design</a></h2>
<h3><a class="header" href="#the-helper-and-modifier-helpers" id="the-helper-and-modifier-helpers">The <code>helper</code> and <code>modifier</code> helpers</a></h3>
<p>This RFC introduces two new helpers named <code>helper</code> and <code>modifier</code>, which work
similarly to the <code>component</code> helper:</p>
<ul>
<li>
<p>When passed a string (e.g. <code>(helper &quot;foo&quot;)</code>) as the first argument, it will
produce an opaque, internal &quot;helper definition&quot; or &quot;modifier definition&quot;
object that can be passed around and invoked elsewhere.</p>
</li>
<li>
<p>Any additional positional and/or named arguments (a.k.a. params and hash)
will be stored (&quot;curried&quot;) inside the definition object, such that, when
invoked, these arguments will be passed along to the referenced helper or
modifier.</p>
</li>
</ul>
<p>Some additional details:</p>
<ul>
<li>
<p>When the first argument passed to the <code>helper</code> or <code>modifier</code> helper is
<code>null</code>, <code>undefined</code> or an empty string, it will produce a no-op definition
object. In the case of the <code>helper</code> helper, this will produce <code>undefined</code>
when invoked, regardless of the arguments that are passed to the invocation.
In the case of the <code>modifier</code> helper, it will not perform any operations on
the target element.</p>
</li>
<li>
<p>When the first argument passed to the <code>helper</code> or <code>modifier</code> helper is a
string, it will be used to resolve a helper or modifier (respectively) with
the same name. If the resolution failed, it will result in a runtime error.
However, the timing of this lookup is unspecified. <code>(helper &quot;not-a-helper&quot;)</code>
may result in an immediate error, or it may happen when it is later passed
into the <code>helper</code> helper a second time, or it may happen when it is invoked.
If it is never invoked, the error may not be reported at all. This timing may
change between releases and should not be relied upon.</p>
</li>
<li>
<p>Some built-in helpers or modifiers may not be resolvable with the <code>helper</code>
and <code>modifier</code> helpers. For example, <code>(helper &quot;debugger&quot;)</code> and
<code>(helper &quot;yield&quot;)</code> will not work, as they are considered <em>keywords</em>. For
implementation simplicity, we propose to forbid resolving built-in helpers,
components and modifiers this way across the board (i.e. a runtime error).
We acknowledge that there are good use cases for this feature such as
currying the <code>array</code> and <code>hash</code> helpers, and will consider enabling them in
the future on a case-by-case basis.</p>
</li>
<li>
<p>Similarly, contextual helpers cannot be named after certain keywords. For
example, <code>{{#let ... as |yield|}} {{yield}} {{/let}}</code> will not work. We
propose to turn these cases into syntax errors.</p>
</li>
<li>
<p>A contextual helper or modifier can be further &quot;curried&quot; by passing them back
into the <code>helper</code> or <code>modifier</code> helper again, as shown in the example in the
<a href="#Summary">summary</a> section. This will produce a new definition object.</p>
</li>
<li>
<p>When the first argument passed to the <code>helper</code> or <code>modifier</code> helper is a
bound value, a new definition object will be produced whenever the value
changes. This will <em>invalidate</em> all downstream invocations. If the previous
value is a <a href="https://emberjs.com/api/ember/3.7/functions/@ember%2Fcomponent%2Fhelper/helper">simple helper</a>,
this has no observable effect and Ember will simply invoke the new helper
value. If the previous value is a <a href="https://emberjs.com/api/ember/3.7/classes/Helper">class-based helper</a>,
or a modifier, the existing instance will be destroyed before the new value
is invoked. On the other hand, if only the curried arguments has changed, the
helper or modifier instances (if any) will remain.</p>
</li>
<li>
<p>An important implication of the teardown semantics is that it is possible for
a modifier to be destroyed while its target element lives on for much longer.
Therefore, it is important to actually teardown any event listeners and
cleanup any associated states in the <code>destroyModifier</code> hook.</p>
</li>
<li>
<p>Positional arguments are &quot;curried&quot; the same way as the <code>component</code> helper.
This matches the behavior of <code>Function.prototype.bind</code>.</p>
<pre><code class="language-hbs">{{#let (helper &quot;join-words&quot; separator=&quot;,&quot;) as |join|}}
  {{join &quot;foo&quot; &quot;bar&quot; &quot;baz&quot;}} {{!-- &quot;foo,bar,baz&quot; --}}

  {{#let (helper join &quot;foo&quot;) as |foo|}}
    {{foo &quot;bar&quot; &quot;baz&quot;}} {{!-- &quot;foo,bar,baz&quot; --}}

    {{#let (helper foo &quot;bar&quot;) as |foo-bar|}}
      {{foo-bar &quot;baz&quot;}} {{!-- &quot;foo,bar,baz&quot; --}}
    {{/let}}

  {{/let}}

{{/let}}
</code></pre>
</li>
<li>
<p>Named arguments are curried the same way as the <code>component</code> helper.
This matches the &quot;last-write-wins&quot; behavior of <code>Object.assign</code>.</p>
<pre><code class="language-hbs">{{#let (helper &quot;join-words&quot; &quot;foo&quot; &quot;bar&quot; &quot;baz&quot;) as |join|}}
  {{join separator=&quot;,&quot;}} {{!-- foo,bar,baz --}}

  {{#let (helper join separator=&quot;,&quot;) as |comma|}}
    {{comma separator=&quot; &quot;}} {{!-- foo bar baz --}}

    {{#let (helper comma separator=&quot; &quot;) as |space|}}
      {{space separator=&quot;-&quot;}} {{!-- foo-bar-baz --}}
    {{/let}}

  {{/let}}

{{/let}}
</code></pre>
</li>
<li>
<p>When a definition object is passed into JavaScipt (e.g. as an argument to a
JavaScript helper), the resulting value is unspecified (hence &quot;opaque&quot;). In
particular, for helpers, it is <em>not</em> guarenteed that it will be an invokable
JavaScript function. The only guarentee provided is that, when passed back
into Handlebars it will be an invokable value. Hanging onto a definition
object in JavaScript may result in unexpected memory leaks, as these objects
may close over arbitrary template states.</p>
</li>
</ul>
<h3><a class="header" href="#invoking-contextual-helpers" id="invoking-contextual-helpers">Invoking contextual helpers</a></h3>
<p>Invoking a contextual helper is no different from invoking any other helpers:</p>
<pre><code class="language-hbs">{{#let (helper &quot;join-words&quot; &quot;foo&quot; &quot;bar&quot; separator=&quot; &quot;) as |foo-bar|}}

  {{!-- content position --}}

  {{foo-bar}}

  {{foo-bar &quot;baz&quot;}}

  {{foo-bar separator=&quot;,&quot;}}

  {{!-- not necessary, but works --}}

  {{helper foo-bar}}

  {{helper foo-bar &quot;baz&quot;}}

  {{helper foo-bar separator=&quot;,&quot;}}

  {{!-- attribute position --}}

  &lt;div class={{foo-bar}}&gt;...&lt;/div&gt;

  &lt;div class={{foo-bar &quot;baz&quot;}}&gt;...&lt;/div&gt;

  &lt;div class={{foo-bar separator=&quot;,&quot;}}&gt;...&lt;/div&gt;

  {{!-- not necessary, but works --}}

  &lt;div class={{helper foo-bar}}&gt;...&lt;/div&gt;

  &lt;div class={{helper foo-bar &quot;baz&quot;}}&gt;...&lt;/div&gt;

  &lt;div class={{helper foo-bar separator=&quot;,&quot;}}&gt;...&lt;/div&gt;

  {{!-- curly invocation, argument position --}}

  {{my-component value=(foo-bar)}}

  {{my-component value=(foo-bar &quot;baz&quot;)}}

  {{my-component value=(foo-bar separator=&quot;,&quot;)}}

  {{!-- these will pass the helper itself into the component, instead of invoking it now --}}

  {{my-component helper=foo-bar}}

  {{my-component helper=(helper foo-bar)}}

  {{my-component helper=(helper foo-bar &quot;baz&quot;)}}

  {{my-component helper=(helper foo-bar separator=&quot;,&quot;)}}

  {{!-- angle bracket invokation, argument position --}}

  &lt;MyComponent @value={{(foo-bar)}} /&gt;

  &lt;MyComponent @value={{foo-bar &quot;baz&quot;}} /&gt;

  &lt;MyComponent @value={{foo-bar separator=&quot;,&quot;}} /&gt;

  {{!-- these will pass the helper itself into the component, instead of invoking it now --}}

  &lt;MyComponent @helper={{foo-bar}} /&gt;

  &lt;MyComponent @helper={{helper foo-bar}} /&gt;

  &lt;MyComponent @helper={{helper foo-bar &quot;baz&quot;}} /&gt;

  &lt;MyComponent @value={{helper foo-bar separator=&quot;,&quot;}} /&gt;

  {{!-- sub-expression positions --}}

  {{yield (foo-bar)}}

  {{yield (foo-bar &quot;baz&quot;)}}

  {{yield (foo-bar separator=&quot;,&quot;)}}

  {{!-- these will yield the helper itself (&quot;contextual helper&quot;), instead of invoking it now --}}

  {{yield foo-bar}}

  {{yield (helper foo-bar)}}

  {{yield (helper foo-bar &quot;baz&quot;)}}

  {{yield (helper foo-bar separator=&quot;,&quot;)}}

  {{!-- deeply nested sub-expression --}}

  {{#if (eq (concat &quot;&gt;&gt;&gt; &quot; (foo-bar &quot;baz&quot;) &quot; &lt;&lt;&lt;&quot;) &quot;&gt;&gt;&gt; foo bar baz &lt;&lt;&lt;&quot;)}}
    This is true.
  {{/if}}

  {{!-- runtime error: not a component --}}
  &lt;foo-bar /&gt;

  {{!-- runtime error: not a modifier --}}
  &lt;div {{foo-bar}}&gt;
{{/let}}
</code></pre>
<h3><a class="header" href="#invoking-contextual-modifiers" id="invoking-contextual-modifiers">Invoking contextual modifiers</a></h3>
<p>Invoking a contextual helper is no different from invoking any other modifiers:</p>
<pre><code class="language-hbs">{{#let (modifier &quot;on&quot; click=(action &quot;submit&quot;)) as |on-click|}}

  {{!-- HTML elements --}}

  &lt;button {{on-click}}&gt;Click Me!!&lt;/button&gt;

  &lt;button {{on-click &quot;extra&quot; &quot;args&quot;}}&gt;Click Me!!&lt;/button&gt;

  &lt;button {{on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;)}}&gt;
    Click Me!!
  &lt;/button&gt;

  {{!-- not necessary, but works --}}

  &lt;button {{modifier on-click}}&gt;Click Me!!&lt;/button&gt;

  &lt;button {{modifier on-click &quot;extra&quot; &quot;args&quot;}}&gt;Click Me!!&lt;/button&gt;

  &lt;button {{modifier on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;)}}&gt;
    Click Me!!
  &lt;/button&gt;

  {{!-- components --}}

  &lt;MyComponent {{on-click}} /&gt;

  &lt;MyComponent {{on-click &quot;extra&quot; &quot;args&quot;}} /&gt;

  &lt;MyComponent {{on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;)}} /&gt;

  {{!-- not necessary, but works --}}

  &lt;MyComponent {{modifier on-click}} /&gt;

  &lt;MyComponent {{modifier on-click &quot;extra&quot; &quot;args&quot;}} /&gt;

  &lt;MyComponent {{modifier on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;)}} /&gt;

  {{!-- these will pass the modifier itself into the component, instead of invoking it now --}}

  &lt;MyComponent @modifier={{on-click}} /&gt;

  &lt;MyComponent @modifier={{modifier on-click}} /&gt;

  &lt;MyComponent @modifier={{modifier on-click &quot;extra&quot; &quot;args&quot;}} /&gt;

  &lt;MyComponent @modifier={{modifier on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;)}} /&gt;

  {{my-component modifier=on-click}}

  {{my-component modifier=(modifier on-click)}}

  {{my-component modifier=(modifier on-click &quot;extra&quot; &quot;args&quot;)}}

  {{my-component modifier=(modifier on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;))}}

  {{!-- these will yield the modifier itself (&quot;contextual modifier&quot;), instead of invoking it now --}}

  {{yield on-click}}

  {{yield (modifier on-click)}}

  {{yield (modifier on-click &quot;extra&quot; &quot;args&quot;)}}

  {{yield (modifier on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;))}}

  {{!-- runtime error: cannot invoke a modifier as a helper --}}

  {{yield (on-click)}}

  {{yield (on-click &quot;extra&quot; &quot;args&quot;)}}

  {{yield (on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;))}}

  {{!-- runtime error: cannot append a modifier --}}

  {{on-click}}

  {{on-click &quot;extra&quot; &quot;args&quot;}}

  {{on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;)}}

  {{!-- runtime error: cannot set an attribute to a modifier --}}

  &lt;div class={{on-click}} /&gt;

  &lt;div class={{on-click &quot;extra&quot; &quot;args&quot;}} /&gt;

  &lt;div class={{on-click mouseenter=(action &quot;highlight&quot;) mouseleave=(action &quot;unhighlight&quot;)}} /&gt;

  {{!-- runtime error: not a component --}}
  &lt;on-click /&gt;
{{/let}}
</code></pre>
<h3><a class="header" href="#relationship-with-globals" id="relationship-with-globals">Relationship with globals</a></h3>
<p>Today, Ember apps rely heavily on the global namespace as the main mechanism of
making components, helpers and modifiers available. Ideally, in a world where
&quot;everything is a value&quot;, the global and local namespace should behave the same
way. Global components, helpers and modifiers should just be global variables
that are implicitly defined around every templates in the app.</p>
<p>In other words, it is as if every template has the following hidden &quot;prelude&quot;
around its content:</p>
<pre><code class="language-hbs">{{!-- prelude --}}
{{#let (component &quot;input&quot;) as |input|}}
  {{#let (helper &quot;concat&quot;) as |concat|}}
    {{#let (modifier &quot;action&quot;) as |action|}}
      {{!-- ...other global components, helpers and modifiers omitted... --}}

      {{!-- begin template content --}}
      Your name:
      {{concat this.firstName &quot; &quot; this.lastName}}

      Change it:
      {{input value=this.firstName}}
      {{input value=this.lastName}}

      &lt;button {{action &quot;submit&quot;}}&gt;&lt;/button&gt;
      {{!-- end tempalte content ---}}
    {{/let}}
  {{/let}}
{{/let}}
</code></pre>
<p>While this largely matches how things work today, there are a few notable
differences where globals behave &quot;unexpectedly&quot; in this world.</p>
<p>First of all, it is not possible to reference a component, helper or modifier
in templates without invoking them today:</p>
<pre><code class="language-hbs">{{!-- if `join-words` is a global helper, this works as expected --}}
{{!-- this invokes the helper and yield the result --}}

{{yield (join-words &quot;foo&quot; &quot;bar&quot; separator=&quot;,&quot;)}}
         ~~~~~~~~~~

{{!-- however, in this position, Ember does not &quot;see&quot; the helper --}}
{{!-- this falls back to looking up the `join-words` property on `this` --}}

{{yield join-words}}
        ~~~~~~~~~~

{{!-- as opposed to a &quot;true&quot; variable/value binding... --}}
{{!-- this yields the helper as a value, as expected --}}

{{#let (helper &quot;join-words&quot;) as |join-words|}}
  {{yield join-words}}
          ~~~~~~~~~~
{{/let}}
</code></pre>
<p>In the long term, we propose to unify the semantics such that globals will
behave exactly like local bindings (i.e. we should make this second case work).</p>
<p>However, is not possible in the short term. This is due to the ambiguity
between referencing a global variable and the
<a href="https://github.com/emberjs/rfcs/blob/master/text/0308-deprecate-property-lookup-fallback.md">property lookup fallback</a>
feature. We propose we simply wait until the property lookup fallback is fully
deprecated and removed, at which point we can reclaim the syntax.</p>
<p>In the mean time, globals can be referenced explicitly using the <code>component</code>,
<code>helper</code>, and <code>modifier</code> helpers.</p>
<p>Another difference is how global helpers can be invoked without arguments in
named arguments position for angle bracket invocations:</p>
<pre><code class="language-hbs">{{!-- if `pi` is a global helper that returns the value of the constant 𝛑 --}}
{{!-- this invokes the helper and passes the value 3.1415... --}}
&lt;MyComponent @value={{pi}} /&gt;
                      ~~

{{!-- as opposed to a &quot;true&quot; variable/value binding... --}}

{{#let (helper &quot;pi&quot;) as |pi|}}
  {{!-- this passes the helper into the component --}}
  &lt;MyComponent @value={{pi}} /&gt;
                        ~~

  {{!-- this invokes the helper and passes the value 3.1415... --}}
  &lt;MyComponent @value={{(pi)}} /&gt;
                        ~~~~
{{/let}}
</code></pre>
<p>Notably, this problem only exists in the named arguments position and only in
angle bracket invocations. For content and attribute positions, it would not
make sense to pass a helper &quot;by value&quot;, so the ambiguity does not exist (so it
always invokes). For sub-expression positions (which includes argument
positions for curly invocations), the parentheses are already mandatory
(otherwise it invokes the property fallback).</p>
<p>We propose to deprecate auto-invoking global helpers with no arguments in named
argument positions for angle bracket invocations and require the parentheses
instead. This will make room for unifying the global semantics in the future.</p>
<p>It is also worth pointing out that, since helpers tend to be pure, helpers
that take no arguments are exceedingly rare.</p>
<p>Finally, the last challenge to the unification is it is entirely possible to
have any combinations of components, helpers and modifiers all with the same
name today. This works, as they currently live in different &quot;namespaces&quot;, and
each lookup is contextually scoped to their respective &quot;namespace&quot; depending on
the position where it is invoked:</p>
<pre><code class="language-hbs">{{!-- foo-bar, the modifier here --}}
&lt;div {{foo-bar}} /&gt;
       ~~~~~~~

{{!-- foo-bar, the helper here --}}
&lt;div class={{foo-bar}} /&gt;
             ~~~~~~~

{{!-- foo-bar, the helper here --}}
{{#let (foo-bar) as |result|}}
        ~~~~~~~
{{/let}}

{{!-- foo-bar, the component here --}}
{{#foo-bar}}...{{/foo-bar}}
   ~~~~~~~        ~~~~~~~

{{!-- prefers foo-bar, the component here --}}
{{!-- if not found, then foo-bar, the helper --}}
{{foo-bar}}
  ~~~~~~~
</code></pre>
<p>Since this could get pretty confusing, most developers already avoid giving
these unrelated the same names. However, it is certainly possible that they
may happen by accident and go unnoticed (e.g. an addon introducing a global
helper that &quot;conflicts&quot; with a component in the app).</p>
<p>These kind of naming conflicts would not make sense in the value-based world.
Imagine if this is how JavaScript works:</p>
<pre><code class="language-js">class FooBar {}

function FooBar() {}

const FooBar = 1;

class FooBarBaz extends FooBar {}
//                      ~~~~~~ FooBar, the class here

console.log(FooBar());
//          ~~~~~~ FooBar, the function here

console.log(FooBar + 1);
//          ~~~~~~ FooBar, the constant here

someObj.FooBar = FooBar;
//               ~~~~~~ well, which one is this?
</code></pre>
<p>Clearly, this would be unacceptable and is similar to the situation we find
ourselves in here.</p>
<p>We propose to issue deprecation warnings whenever we detect these conflicts,
both at build time and at invocation time, while maintaining the same lookup
precedence for the time being. For example, when invoking a component in the
content position, if we see that there is also a helper with the same name, it
should result in a deprecation asking the developer to remain one or the other.</p>
<p>Notably, there is such a conflict in Ember today where <code>action</code> is both a
helper and a modifier. Instead of deprecating one of them, we propose to use an
internal mechanism to produce a single special value such that it will be
invokable as either a modifier or a helper context. This is different than
&quot;namespace&quot; semantics in that there is only one context-independent value in this
special case, i.e. <code>(helper &quot;action&quot;) === (modifier &quot;action&quot;)</code>.</p>
<p>We also acknowledge that, so long as there are <em>implicit</em> globals, we may never
be able to truly unify global bindings with local ones, as implicit global
bindings have a high risk of conflicting with HTML elements. Consider the
built-in <code>input</code> helper, or an in-app <code>main</code> helper. If these were implicitly
turned into global identifiers, they would conflict with the HTML elements with
the same name:</p>
<pre><code class="language-hbs">&lt;input type=&quot;text&quot;&gt;
 ~~~~~ now refers to the global `input` identifier?

&lt;main&gt;...&lt;/main&gt;
 ~~~~ now refers to the global `main` identifier?
</code></pre>
<p>While the problem exists for local bindings also, it was already addressed in
<a href="https://github.com/emberjs/rfcs/pull/311">RFC #311</a>. With local bindings, this
problem is fairly noticible and understandable since the conflict is introduced
nearby. The solution is also fairly simple – just rename the local variable to
avoid the conflict. With proper linting, this could be quite easily avoided
altogether.</p>
<p>With <em>implicit</em> global bindings, this problem is much more difficult to spot
and reason about. There is also no quick way out, other than to rename the
global component, helper or modifer which could be difficult or not an option
at all for addon authors trying to maintain compatibility. To truly resolve
this conflict, we would have to eliminate implicit globals, which is out of
scope for this RFC. This also wouldn't be a problem until all the proposed
deprecations are implemented and removed, which would be quite some time.</p>
<p>We <em>speculate</em> that when all the of that is said and done, we would have an
alternative resolution mechanism (&quot;template imports&quot;) that does not have this
problem. Alternatively, we could exclude the angle bracket invocation position
from being able to &quot;see&quot; implicit global identifiers.</p>
<h3><a class="header" href="#local-helpers-and-modifiers" id="local-helpers-and-modifiers">Local helpers and modifiers</a></h3>
<p>A nice fallout of this plan is that developers will be able to define helpers
and modifiers specific to a component locally in the same JavaScript file:</p>
<pre><code class="language-js">// app/components/date-picker.js

import Component from '@ember/component';
import { helper } from '@ember/component/helper';

export default Component.extend({
  date: null, // passed in

  'format-date': helper(function(params, hash) {
    /* ... */
  })
});
</code></pre>
<pre><code class="language-hbs">{{!-- app/templates/components/date-picker.hbs --}}
{{this.format-date this.date}}
</code></pre>
<p>In additional to encapsulation and namespacing, this will also enable even more
advanced use cases that uses the component's state:</p>
<pre><code class="language-js">// app/components/filtered-each.js

import Component from '@ember/component';
import { helper } from '@ember/component/helper';
import { computed } from '@ember/object';

export default Component.extend({
  list: null, // passed in
  callback: null, // passed in

  filter: computed('callback', function() {
    return helper(params =&gt; this.callback(params[0]));
  });
});
</code></pre>
<pre><code class="language-hbs">{{!-- app/templates/components/filtered-each.hbs --}}

{{#each this.list as |item|}}
  {{#if (this.filter item)}}
    {{yield item}}
  {{/if}}
{{/each}}
</code></pre>
<p>This feature would work with element modifiers as well.</p>
<p>Ideally, this should also work with components. However, currently there are
two pieces to a component – a template and a JavaScript class, either could be
optional. This poses a challenge to invoking components this way – without
going through the component helper, there is no easy way to import or package
a component into a single value. This is a solvable problem, but to design a
solution for that would be out of scope for this RFC. For the time being, the
only way to get a handle of a &quot;component defition value&quot; would be through the
component helper. Attempting to &quot;invoke&quot; just the component template or class
this way will result in a runtime error.</p>
<h2><a class="header" href="#how-we-teach-this" id="how-we-teach-this">How we teach this</a></h2>
<p>There are two sides to this feature – the consumption side and the authoring
side.</p>
<p>The consumption side refers to learning how the contextual helper and modifier
values can be used (invoked). We expect developers to enounter this mainly
through addons that others have written. So long as there is adequate
documentation from the addon authors, we expect that this group of users can be
immediately productive by simply treating these APIs as DSLs, similar to the
Router DSL.</p>
<p>In other words, while this group of developer may not immediately understand
how to <em>author</em> these kind of APIs, or what is involved under-the-hood to make
it work, the design goal is that it should feel straightforward to <em>consume</em>
this style of API.</p>
<p>The authoring side refers to using the <code>helper</code> and <code>modifier</code> helpers, and
more importantly, the advanced composition patterns that motivated their
existence in the first place As with the <code>component</code> helper and other
&quot;higher-order functions&quot; in JavaScript, this is a somewhat advanced topic that
is mainly targeted at addon authors and advanced developers.</p>
<p>For this group of users, we expect this feature to complement and complete the
&quot;contextual components&quot; feature. Developers who are already familiar with that
feature should feel right at home. We expect to be able to introduce this new
feature at the point where we currently teach contextual components today.</p>
<p>In the long term, the unifications proposed in this RFC should make these
concepts easier to teach for this group of developers, as components, helpers
and modifiers, whether global or contextual, will all behave uniformly. The
value-based semantics also better matches JavaScript which they are probably
already familiar with.</p>
<p>The official documentations should be updated to include this feature:</p>
<ul>
<li>
<p>The new <code>helper</code> and <code>modifier</code> helpers need be be added to the API docs.
We should consider cross-linking between the <code>helper</code>, <code>modifier</code> and
<code>component</code> helpers since they solve a similar problem.</p>
</li>
<li>
<p>The guide should be updated to teach this feature as well. We recommend
teaching the two sides of the feature separately, and prioritize the
consumption side, as that is what beginners are likely to encounter first.</p>
<p>For example, when teaching component invocations, there can be a section that
mentions:</p>
<blockquote>
<p>Sometimes, components may be yielded to you as a block param. These are
called contextual components, and they can be invoked just like any other
components you have encountered so far.</p>
<p>...examples...</p>
<p>To learn how to do this yourself, skip ahead to the &quot;Composition Patterns&quot;
section (link).</p>
</blockquote>
</li>
<li>
<p>For the authoring side, we recommend teaching the helper, modifier and
component version of the feature in a single place (such as a &quot;Composition
Patterns&quot; section), cross-linked from their respective sections, rather than
repeating it three times.</p>
</li>
</ul>
<h2><a class="header" href="#drawbacks" id="drawbacks">Drawbacks</a></h2>
<p>This RFC introduces another feature that developers may encounter and have to
learn when consuming addons. However, on the whole, we think this will simplify
things more than adding to the concepts – as it ultimiately try to unify the
behavior of components, helpers and modifiers (and in the future, globals).
This should make things feel more consistent and allow developers to apply
their knowledge consistently across the board.</p>
<p>In the short term, this feature may amplify some of the mismatches and causes
confusions where the legacy semantics does not perfectly match the new world we
are building. This could be mitigated with helpful deprecation messages.</p>
<h2><a class="header" href="#alternatives" id="alternatives">Alternatives</a></h2>
<p><a href="https://github.com/emberjs/rfcs/pull/208">RFC #208</a> has previously explored
the same design space. It solves the same fundamental problems, but proposes
two seperate helpers resolution/currying and invocation. This is largely due to
limitations and ambiguities in Handlebars. This RFC attempts to remove the need
of a separate invocation helper by resolving the ambiguities and integrating
more tightly with Handlebars. If accepted, this RFC will supersede the design
proposed in RFC #208.</p>
<p>As proposed, this RFC relies heavily on context-dependent syntatic positions to
disambiguate between component, helper and modifier invocations. For example,
while they may look similar, the following syntax does not produce the same
result:</p>
<pre><code class="language-hbs">{{foo-bar baz=&quot;bat&quot;}}

{{(foo-bar baz=&quot;bar&quot;)}}
</code></pre>
<p>If <code>foo-bar</code> is a helper, either would work. However, if <code>foo-bar</code> is a
component, only the first form would work and the second form would result in
a runtime error (trying to invoke a component as helper).</p>
<p>A different design has been considered where the first form is just strictly a
syntactic sugar for the latter and <code>(...)</code> invocation is one true primitive
that ties everything together.</p>
<p>Specifically, when &quot;invoked&quot; with <code>(...)</code>, a component or modifier simply
produces a value, which is a definition object with the curried arguments, i.e.
<code>(...)</code> is a syntatic surgar for currying using the <code>helper</code> and <code>modifier</code>
helpers. The <code>{{...}}</code> syntax then simply &quot;append&quot; the curried definition
object by first invoking it.</p>
<p>This design turned out to add more complexities and confusions than the
unification has brought to the table, and so that design was abandoned in favor
of what is proposed here.</p>
<p>Another alternative is to keep the global namespace separate from the local
namespace, thus avoiding the need for most deprecations. In practice, we
believe this would result in much more confusion when things do not behave the
way you would expect, but only in some niche corner cases.</p>
<h2><a class="header" href="#unresolved-questions" id="unresolved-questions">Unresolved questions</a></h2>
<p>None</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="0431-guides-restructure.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="0435-modifier-splattributes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="0431-guides-restructure.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="0435-modifier-splattributes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
